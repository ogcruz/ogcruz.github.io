<!doctype html>
<html>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>
<title>tidyverse</title><link href='https://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext' rel='stylesheet' type='text/css' /><style type='text/css'>html {overflow-x: initial !important;}:root { --bg-color:#ffffff; --text-color:#333333; --select-text-bg-color:#B5D6FC; --select-text-font-color:auto; --monospace:"Lucida Console",Consolas,"Courier",monospace; }
html { font-size: 14px; background-color: var(--bg-color); color: var(--text-color); font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; -webkit-font-smoothing: antialiased; }
body { margin: 0px; padding: 0px; height: auto; bottom: 0px; top: 0px; left: 0px; right: 0px; font-size: 1rem; line-height: 1.42857; overflow-x: hidden; background: inherit; }
iframe { margin: auto; }
a.url { word-break: break-all; }
a:active, a:hover { outline: 0px; }
.in-text-selection, ::selection { text-shadow: none; background: var(--select-text-bg-color); color: var(--select-text-font-color); }
#write { margin: 0px auto; height: auto; width: inherit; word-break: normal; word-wrap: break-word; position: relative; white-space: normal; padding-bottom: 70px; overflow-x: visible; }
.first-line-indent #write div, .first-line-indent #write li, .first-line-indent #write p { text-indent: 2em; }
.first-line-indent #write div :not(p):not(div), .first-line-indent #write div.md-htmlblock-container, .first-line-indent #write p *, .first-line-indent pre { text-indent: 0px; }
.for-image #write { padding-left: 8px; padding-right: 8px; }
body.typora-export { padding-left: 30px; padding-right: 30px; }
@media screen and (max-width: 500px) {
  body.typora-export { padding-left: 0px; padding-right: 0px; }
  .CodeMirror-sizer { margin-left: 0px !important; }
  .CodeMirror-gutters { display: none !important; }
}
#write > blockquote:first-child, #write > div:first-child, #write > figure:first-child, #write > ol:first-child, #write > p:first-child, #write > pre:first-child, #write > ul:first-child { margin-top: 30px; }
#write li > figure:first-child { margin-top: -20px; }
#write ol, #write ul { position: relative; }
img { max-width: 100%; vertical-align: middle; }
button, input, select, textarea { color: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; }
input[type="checkbox"], input[type="radio"] { line-height: normal; padding: 0px; }
*, ::after, ::before { box-sizing: border-box; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p, #write pre { width: inherit; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p { position: relative; }
h1, h2, h3, h4, h5, h6 { break-after: avoid-page; break-inside: avoid; orphans: 2; }
p { orphans: 4; }
h1 { font-size: 2rem; }
h2 { font-size: 1.8rem; }
h3 { font-size: 1.6rem; }
h4 { font-size: 1.4rem; }
h5 { font-size: 1.2rem; }
h6 { font-size: 1rem; }
.md-math-block, .md-rawblock, h1, h2, h3, h4, h5, h6, p { margin-top: 1rem; margin-bottom: 1rem; }
.hidden { display: none; }
.md-blockmeta { color: rgb(204, 204, 204); font-weight: 700; font-style: italic; }
a { cursor: pointer; }
sup.md-footnote { padding: 2px 4px; background-color: rgba(238, 238, 238, 0.7); color: rgb(85, 85, 85); border-radius: 4px; cursor: pointer; }
sup.md-footnote a, sup.md-footnote a:hover { color: inherit; text-transform: inherit; text-decoration: inherit; }
#write input[type="checkbox"] { cursor: pointer; width: inherit; height: inherit; }
figure { overflow-x: auto; margin: 1.2em 0px; max-width: calc(100% + 16px); padding: 0px; }
figure > table { margin: 0px !important; }
tr { break-inside: avoid; break-after: auto; }
thead { display: table-header-group; }
table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; break-inside: auto; text-align: left; }
table.md-table td { min-width: 80px; }
.CodeMirror-gutters { border-right: 0px; background-color: inherit; }
.CodeMirror { text-align: left; }
.CodeMirror-placeholder { opacity: 0.3; }
.CodeMirror pre { padding: 0px 4px; }
.CodeMirror-lines { padding: 0px; }
div.hr:focus { cursor: none; }
#write pre { white-space: pre-wrap; }
#write.fences-no-line-wrapping pre { white-space: pre; }
#write pre.ty-contain-cm { white-space: normal; }
.CodeMirror-gutters { margin-right: 4px; }
.md-fences { font-size: 0.9rem; display: block; break-inside: avoid; text-align: left; overflow: visible; white-space: pre; background: inherit; position: relative !important; }
.md-diagram-panel { width: 100%; margin-top: 10px; text-align: center; padding-top: 0px; padding-bottom: 8px; overflow-x: auto; }
#write .md-fences.mock-cm { white-space: pre-wrap; }
.md-fences.md-fences-with-lineno { padding-left: 0px; }
#write.fences-no-line-wrapping .md-fences.mock-cm { white-space: pre; overflow-x: auto; }
.md-fences.mock-cm.md-fences-with-lineno { padding-left: 8px; }
.CodeMirror-line, twitterwidget { break-inside: avoid; }
.footnotes { opacity: 0.8; font-size: 0.9rem; margin-top: 1em; margin-bottom: 1em; }
.footnotes + .footnotes { margin-top: 0px; }
.md-reset { margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: top; background: 0px 0px; text-decoration: none; text-shadow: none; float: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; -webkit-tap-highlight-color: transparent; line-height: normal; font-weight: 400; text-align: left; box-sizing: content-box; direction: ltr; }
li div { padding-top: 0px; }
blockquote { margin: 1rem 0px; }
li .mathjax-block, li p { margin: 0.5rem 0px; }
li { margin: 0px; position: relative; }
blockquote > :last-child { margin-bottom: 0px; }
blockquote > :first-child, li > :first-child { margin-top: 0px; }
.footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; white-space: normal; }
#write .footnote-line { white-space: pre-wrap; }
@media print {
  body, html { border: 1px solid transparent; height: 99%; break-after: avoid; break-before: avoid; }
  #write { margin-top: 0px; border-color: transparent !important; }
  .typora-export * { -webkit-print-color-adjust: exact; }
  html.blink-to-pdf { font-size: 13px; }
  .typora-export #write { padding-left: 1cm; padding-right: 1cm; padding-bottom: 0px; break-after: avoid; }
  .typora-export #write::after { height: 0px; }
  @page { margin: 20mm 0px; }
}
.footnote-line { margin-top: 0.714em; font-size: 0.7em; }
a img, img a { cursor: pointer; }
pre.md-meta-block { font-size: 0.8rem; min-height: 0.8rem; white-space: pre-wrap; background: rgb(204, 204, 204); display: block; overflow-x: hidden; }
p > img:only-child { display: block; margin: auto; }
p > .md-image:only-child { display: inline-block; width: 100%; text-align: center; }
#write .MathJax_Display { margin: 0.8em 0px 0px; }
.md-math-block { width: 100%; }
.md-math-block:not(:empty)::after { display: none; }
[contenteditable="true"]:active, [contenteditable="true"]:focus { outline: 0px; box-shadow: none; }
.md-task-list-item { position: relative; list-style-type: none; }
.task-list-item.md-task-list-item { padding-left: 0px; }
.md-task-list-item > input { position: absolute; top: 0px; left: 0px; margin-left: -1.2em; margin-top: calc(1em - 10px); }
.math { font-size: 1rem; }
.md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-radius: 10px; }
.md-toc-content { position: relative; margin-left: 0px; }
.md-toc-content::after, .md-toc::after { display: none; }
.md-toc-item { display: block; color: rgb(65, 131, 196); }
.md-toc-item a { text-decoration: none; }
.md-toc-inner:hover { }
.md-toc-inner { display: inline-block; cursor: pointer; }
.md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: 700; }
.md-toc-h2 .md-toc-inner { margin-left: 2em; }
.md-toc-h3 .md-toc-inner { margin-left: 4em; }
.md-toc-h4 .md-toc-inner { margin-left: 6em; }
.md-toc-h5 .md-toc-inner { margin-left: 8em; }
.md-toc-h6 .md-toc-inner { margin-left: 10em; }
@media screen and (max-width: 48em) {
  .md-toc-h3 .md-toc-inner { margin-left: 3.5em; }
  .md-toc-h4 .md-toc-inner { margin-left: 5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 6.5em; }
  .md-toc-h6 .md-toc-inner { margin-left: 8em; }
}
a.md-toc-inner { font-size: inherit; font-style: inherit; font-weight: inherit; line-height: inherit; }
.footnote-line a:not(.reversefootnote) { color: inherit; }
.md-attr { display: none; }
.md-fn-count::after { content: "."; }
code, pre, samp, tt { font-family: var(--monospace); }
kbd { margin: 0px 0.1em; padding: 0.1em 0.6em; font-size: 0.8em; color: rgb(36, 39, 41); background: rgb(255, 255, 255); border: 1px solid rgb(173, 179, 185); border-radius: 3px; box-shadow: rgba(12, 13, 14, 0.2) 0px 1px 0px, rgb(255, 255, 255) 0px 0px 0px 2px inset; white-space: nowrap; vertical-align: middle; }
.md-comment { color: rgb(162, 127, 3); opacity: 0.8; font-family: var(--monospace); }
code { text-align: left; vertical-align: initial; }
a.md-print-anchor { white-space: pre !important; border-width: initial !important; border-style: none !important; border-color: initial !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: 0px !important; background: 0px 0px !important; text-decoration: initial !important; text-shadow: initial !important; }
.md-inline-math .MathJax_SVG .noError { display: none !important; }
.md-math-block .MathJax_SVG_Display { text-align: center; margin: 0px; position: relative; text-indent: 0px; max-width: none; max-height: none; min-height: 0px; min-width: 100%; width: auto; overflow-y: hidden; display: block !important; }
.MathJax_SVG_Display, .md-inline-math .MathJax_SVG_Display { width: auto; margin: inherit; display: inline-block !important; }
.MathJax_SVG .MJX-monospace { font-family: var(--monospace); }
.MathJax_SVG .MJX-sans-serif { font-family: sans-serif; }
.MathJax_SVG { display: inline; font-style: normal; font-weight: 400; line-height: normal; zoom: 90%; text-indent: 0px; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; padding: 0px; margin: 0px; }
.MathJax_SVG * { transition: none; }
.MathJax_SVG_Display svg { vertical-align: middle !important; margin-bottom: 0px !important; }
.os-windows.monocolor-emoji .md-emoji { font-family: "Segoe UI Symbol", sans-serif; }
.md-diagram-panel > svg { max-width: 100%; }
[lang="mermaid"] svg, [lang="flow"] svg { max-width: 100%; }
[lang="mermaid"] .node text { font-size: 1rem; }
table tr th { border-bottom: 0px; }
video { max-width: 100%; display: block; margin: 0px auto; }
iframe { max-width: 100%; width: 100%; border: none; }
.highlight td, .highlight tr { border: 0px; }


.CodeMirror { height: auto; }
.CodeMirror.cm-s-inner { background: inherit; }
.CodeMirror-scroll { overflow-y: hidden; overflow-x: auto; z-index: 3; }
.CodeMirror-gutter-filler, .CodeMirror-scrollbar-filler { background-color: rgb(255, 255, 255); }
.CodeMirror-gutters { border-right: 1px solid rgb(221, 221, 221); background: inherit; white-space: nowrap; }
.CodeMirror-linenumber { padding: 0px 3px 0px 5px; text-align: right; color: rgb(153, 153, 153); }
.cm-s-inner .cm-keyword { color: rgb(119, 0, 136); }
.cm-s-inner .cm-atom, .cm-s-inner.cm-atom { color: rgb(34, 17, 153); }
.cm-s-inner .cm-number { color: rgb(17, 102, 68); }
.cm-s-inner .cm-def { color: rgb(0, 0, 255); }
.cm-s-inner .cm-variable { color: rgb(0, 0, 0); }
.cm-s-inner .cm-variable-2 { color: rgb(0, 85, 170); }
.cm-s-inner .cm-variable-3 { color: rgb(0, 136, 85); }
.cm-s-inner .cm-string { color: rgb(170, 17, 17); }
.cm-s-inner .cm-property { color: rgb(0, 0, 0); }
.cm-s-inner .cm-operator { color: rgb(152, 26, 26); }
.cm-s-inner .cm-comment, .cm-s-inner.cm-comment { color: rgb(170, 85, 0); }
.cm-s-inner .cm-string-2 { color: rgb(255, 85, 0); }
.cm-s-inner .cm-meta { color: rgb(85, 85, 85); }
.cm-s-inner .cm-qualifier { color: rgb(85, 85, 85); }
.cm-s-inner .cm-builtin { color: rgb(51, 0, 170); }
.cm-s-inner .cm-bracket { color: rgb(153, 153, 119); }
.cm-s-inner .cm-tag { color: rgb(17, 119, 0); }
.cm-s-inner .cm-attribute { color: rgb(0, 0, 204); }
.cm-s-inner .cm-header, .cm-s-inner.cm-header { color: rgb(0, 0, 255); }
.cm-s-inner .cm-quote, .cm-s-inner.cm-quote { color: rgb(0, 153, 0); }
.cm-s-inner .cm-hr, .cm-s-inner.cm-hr { color: rgb(153, 153, 153); }
.cm-s-inner .cm-link, .cm-s-inner.cm-link { color: rgb(0, 0, 204); }
.cm-negative { color: rgb(221, 68, 68); }
.cm-positive { color: rgb(34, 153, 34); }
.cm-header, .cm-strong { font-weight: 700; }
.cm-del { text-decoration: line-through; }
.cm-em { font-style: italic; }
.cm-link { text-decoration: underline; }
.cm-error { color: red; }
.cm-invalidchar { color: red; }
.cm-constant { color: rgb(38, 139, 210); }
.cm-defined { color: rgb(181, 137, 0); }
div.CodeMirror span.CodeMirror-matchingbracket { color: rgb(0, 255, 0); }
div.CodeMirror span.CodeMirror-nonmatchingbracket { color: rgb(255, 34, 34); }
.cm-s-inner .CodeMirror-activeline-background { background: inherit; }
.CodeMirror { position: relative; overflow: hidden; }
.CodeMirror-scroll { height: 100%; outline: 0px; position: relative; box-sizing: content-box; background: inherit; }
.CodeMirror-sizer { position: relative; }
.CodeMirror-gutter-filler, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-vscrollbar { position: absolute; z-index: 6; display: none; }
.CodeMirror-vscrollbar { right: 0px; top: 0px; overflow: hidden; }
.CodeMirror-hscrollbar { bottom: 0px; left: 0px; overflow: hidden; }
.CodeMirror-scrollbar-filler { right: 0px; bottom: 0px; }
.CodeMirror-gutter-filler { left: 0px; bottom: 0px; }
.CodeMirror-gutters { position: absolute; left: 0px; top: 0px; padding-bottom: 30px; z-index: 3; }
.CodeMirror-gutter { white-space: normal; height: 100%; box-sizing: content-box; padding-bottom: 30px; margin-bottom: -32px; display: inline-block; }
.CodeMirror-gutter-wrapper { position: absolute; z-index: 4; background: 0px 0px !important; border: none !important; }
.CodeMirror-gutter-background { position: absolute; top: 0px; bottom: 0px; z-index: 4; }
.CodeMirror-gutter-elt { position: absolute; cursor: default; z-index: 4; }
.CodeMirror-lines { cursor: text; }
.CodeMirror pre { border-radius: 0px; border-width: 0px; background: 0px 0px; font-family: inherit; font-size: inherit; margin: 0px; white-space: pre; word-wrap: normal; color: inherit; z-index: 2; position: relative; overflow: visible; }
.CodeMirror-wrap pre { word-wrap: break-word; white-space: pre-wrap; word-break: normal; }
.CodeMirror-code pre { border-right: 30px solid transparent; width: fit-content; }
.CodeMirror-wrap .CodeMirror-code pre { border-right: none; width: auto; }
.CodeMirror-linebackground { position: absolute; left: 0px; right: 0px; top: 0px; bottom: 0px; z-index: 0; }
.CodeMirror-linewidget { position: relative; z-index: 2; overflow: auto; }
.CodeMirror-wrap .CodeMirror-scroll { overflow-x: hidden; }
.CodeMirror-measure { position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden; }
.CodeMirror-measure pre { position: static; }
.CodeMirror div.CodeMirror-cursor { position: absolute; visibility: hidden; border-right: none; width: 0px; }
.CodeMirror div.CodeMirror-cursor { visibility: hidden; }
.CodeMirror-focused div.CodeMirror-cursor { visibility: inherit; }
.cm-searching { background: rgba(255, 255, 0, 0.4); }
@media print {
  .CodeMirror div.CodeMirror-cursor { visibility: hidden; }
}


:root { --side-bar-bg-color: #fafafa; --control-text-color: #777; }
@font-face { font-family: "Open Sans"; font-style: normal; font-weight: normal; src: local("Open Sans Regular"), url("./github/400.woff") format("woff"); }
@font-face { font-family: "Open Sans"; font-style: italic; font-weight: normal; src: local("Open Sans Italic"), url("./github/400i.woff") format("woff"); }
@font-face { font-family: "Open Sans"; font-style: normal; font-weight: bold; src: local("Open Sans Bold"), url("./github/700.woff") format("woff"); }
@font-face { font-family: "Open Sans"; font-style: italic; font-weight: bold; src: local("Open Sans Bold Italic"), url("./github/700i.woff") format("woff"); }
html { font-size: 16px; }
body { font-family: "Open Sans", "Clear Sans", "Helvetica Neue", Helvetica, Arial, sans-serif; color: rgb(51, 51, 51); line-height: 1.6; }
#write { max-width: 860px; margin: 0px auto; padding: 20px 30px 100px; }
#write > ul:first-child, #write > ol:first-child { margin-top: 30px; }
body > :first-child { margin-top: 0px !important; }
body > :last-child { margin-bottom: 0px !important; }
a { color: rgb(65, 131, 196); }
h1, h2, h3, h4, h5, h6 { position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.4; cursor: text; }
h1:hover a.anchor, h2:hover a.anchor, h3:hover a.anchor, h4:hover a.anchor, h5:hover a.anchor, h6:hover a.anchor { text-decoration: none; }
h1 tt, h1 code { font-size: inherit; }
h2 tt, h2 code { font-size: inherit; }
h3 tt, h3 code { font-size: inherit; }
h4 tt, h4 code { font-size: inherit; }
h5 tt, h5 code { font-size: inherit; }
h6 tt, h6 code { font-size: inherit; }
h1 { padding-bottom: 0.3em; font-size: 2.25em; line-height: 1.2; border-bottom: 1px solid rgb(238, 238, 238); }
h2 { padding-bottom: 0.3em; font-size: 1.75em; line-height: 1.225; border-bottom: 1px solid rgb(238, 238, 238); }
h3 { font-size: 1.5em; line-height: 1.43; }
h4 { font-size: 1.25em; }
h5 { font-size: 1em; }
h6 { font-size: 1em; color: rgb(119, 119, 119); }
p, blockquote, ul, ol, dl, table { margin: 0.8em 0px; }
li > ol, li > ul { margin: 0px; }
hr { height: 2px; padding: 0px; margin: 16px 0px; background-color: rgb(231, 231, 231); border: 0px none; overflow: hidden; box-sizing: content-box; }
body > h2:first-child { margin-top: 0px; padding-top: 0px; }
body > h1:first-child { margin-top: 0px; padding-top: 0px; }
body > h1:first-child + h2 { margin-top: 0px; padding-top: 0px; }
body > h3:first-child, body > h4:first-child, body > h5:first-child, body > h6:first-child { margin-top: 0px; padding-top: 0px; }
a:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 { margin-top: 0px; padding-top: 0px; }
h1 p, h2 p, h3 p, h4 p, h5 p, h6 p { margin-top: 0px; }
li p.first { display: inline-block; }
ul, ol { padding-left: 30px; }
ul:first-child, ol:first-child { margin-top: 0px; }
ul:last-child, ol:last-child { margin-bottom: 0px; }
blockquote { border-left: 4px solid rgb(223, 226, 229); padding: 0px 15px; color: rgb(119, 119, 119); }
blockquote blockquote { padding-right: 0px; }
table { padding: 0px; word-break: initial; }
table tr { border-top: 1px solid rgb(223, 226, 229); margin: 0px; padding: 0px; }
table tr:nth-child(2n), thead { background-color: rgb(248, 248, 248); }
table tr th { font-weight: bold; border-width: 1px 1px 0px; border-top-style: solid; border-right-style: solid; border-left-style: solid; border-top-color: rgb(223, 226, 229); border-right-color: rgb(223, 226, 229); border-left-color: rgb(223, 226, 229); border-image: initial; border-bottom-style: initial; border-bottom-color: initial; text-align: left; margin: 0px; padding: 6px 13px; }
table tr td { border: 1px solid rgb(223, 226, 229); text-align: left; margin: 0px; padding: 6px 13px; }
table tr th:first-child, table tr td:first-child { margin-top: 0px; }
table tr th:last-child, table tr td:last-child { margin-bottom: 0px; }
.CodeMirror-lines { padding-left: 4px; }
.code-tooltip { box-shadow: rgba(0, 28, 36, 0.3) 0px 1px 1px 0px; border-top: 1px solid rgb(238, 242, 242); }
.md-fences, code, tt { border: 1px solid rgb(231, 234, 237); background-color: rgb(248, 248, 248); border-radius: 3px; padding: 2px 4px 0px; font-size: 0.9em; }
code { background-color: rgb(243, 244, 244); padding: 0px 4px 2px; }
.md-fences { margin-bottom: 15px; margin-top: 15px; padding: 8px 1em 6px; }
.md-task-list-item > input { margin-left: -1.3em; }
@media screen and (min-width: 914px) {
}
@media print {
  html { font-size: 13px; }
  table, pre { break-inside: avoid; }
  pre { word-wrap: break-word; }
}
.md-fences { background-color: rgb(248, 248, 248); }
#write pre.md-meta-block { padding: 1rem; font-size: 85%; line-height: 1.45; background-color: rgb(247, 247, 247); border: 0px; border-radius: 3px; color: rgb(119, 119, 119); margin-top: 0px !important; }
.mathjax-block > .code-tooltip { bottom: 0.375rem; }
.md-mathjax-midline { background: rgb(250, 250, 250); }
#write > h3.md-focus::before { left: -1.5625rem; top: 0.375rem; }
#write > h4.md-focus::before { left: -1.5625rem; top: 0.285714rem; }
#write > h5.md-focus::before { left: -1.5625rem; top: 0.285714rem; }
#write > h6.md-focus::before { left: -1.5625rem; top: 0.285714rem; }
.md-image > .md-meta { border-radius: 3px; padding: 2px 0px 0px 4px; font-size: 0.9em; color: inherit; }
.md-tag { color: rgb(167, 167, 167); opacity: 1; }
.md-toc { margin-top: 20px; padding-bottom: 20px; }
.sidebar-tabs { border-bottom: none; }
#typora-quick-open { border: 1px solid rgb(221, 221, 221); background-color: rgb(248, 248, 248); }
#typora-quick-open-item { background-color: rgb(250, 250, 250); border-color: rgb(254, 254, 254) rgb(229, 229, 229) rgb(229, 229, 229) rgb(238, 238, 238); border-style: solid; border-width: 1px; }
.on-focus-mode blockquote { border-left-color: rgba(85, 85, 85, 0.12); }
header, .context-menu, .megamenu-content, footer { font-family: "Segoe UI", Arial, sans-serif; }
.file-node-content:hover .file-node-icon, .file-node-content:hover .file-node-open-state { visibility: visible; }
.mac-seamless-mode #typora-sidebar { background-color: var(--side-bar-bg-color); }
.md-lang { color: rgb(180, 101, 77); }
.html-for-mac .context-menu { --item-hover-bg-color: #E6F0FE; }





 .typora-export p, .typora-export .footnote-line {white-space: normal;} 
</style>
</head>
<body class='typora-export' >
<div  id='write'  class = 'is-node'><h1><a name='header-n0' class='md-header-anchor '></a><img src='../imagens/barra_procc.png' alt='' referrerPolicy='no-referrer' /></h1><div class='md-toc' mdtype='toc'><p class="md-toc-content"><span class="md-toc-item md-toc-h1" data-ref="n0"><a class="md-toc-inner" href="#header-n0"><img src="file:///home/oswaldo/Documentos/DS_2017/imagens/barra_procc.png" alt="" referrerpolicy="no-referrer"></a></span><span class="md-toc-item md-toc-h2" data-ref="n3"><a class="md-toc-inner" href="#header-n3">1. Arrumando os dados</a></span><span class="md-toc-item md-toc-h4" data-ref="n12"><a class="md-toc-inner" href="#header-n12">1. o Tidyverse</a></span><span class="md-toc-item md-toc-h2" data-ref="n22"><a class="md-toc-inner" href="#header-n22">2. Preparando os dados</a></span><span class="md-toc-item md-toc-h4" data-ref="n41"><a class="md-toc-inner" href="#header-n41">2.1 Operador de Encadeamento (<em>PIPE</em>)</a></span><span class="md-toc-item md-toc-h4" data-ref="n52"><a class="md-toc-inner" href="#header-n52">2.2 Tribble</a></span><span class="md-toc-item md-toc-h4" data-ref="n92"><a class="md-toc-inner" href="#header-n92">2.3 readr</a></span><span class="md-toc-item md-toc-h5" data-ref="n115"><a class="md-toc-inner" href="#header-n115">2.3.1 Exemplo PNAD</a></span><span class="md-toc-item md-toc-h5" data-ref="n141"><a class="md-toc-inner" href="#header-n141">2.3.2 Exemplo Microdado Censo 2010</a></span><span class="md-toc-item md-toc-h4" data-ref="n163"><a class="md-toc-inner" href="#header-n163">2.4 o pacote Tidyr</a></span><span class="md-toc-item md-toc-h4" data-ref="n178"><a class="md-toc-inner" href="#header-n178">2.4.1 gather</a></span><span class="md-toc-item md-toc-h4" data-ref="n186"><a class="md-toc-inner" href="#header-n186">2.4.2 spread</a></span><span class="md-toc-item md-toc-h4" data-ref="n190"><a class="md-toc-inner" href="#header-n190">2.4.3  Unite</a></span><span class="md-toc-item md-toc-h4" data-ref="n195"><a class="md-toc-inner" href="#header-n195">2.4.4 Separate</a></span><span class="md-toc-item md-toc-h4" data-ref="n200"><a class="md-toc-inner" href="#header-n200">2.4.5 Exercícios tidyr</a></span><span class="md-toc-item md-toc-h4" data-ref="n222"><a class="md-toc-inner" href="#header-n222">2.5 o pacote dplyr</a></span><span class="md-toc-item md-toc-h5" data-ref="n241"><a class="md-toc-inner" href="#header-n241">2.5.1 Select </a></span><span class="md-toc-item md-toc-h5" data-ref="n261"><a class="md-toc-inner" href="#header-n261">2.5.2 Filtro </a></span><span class="md-toc-item md-toc-h5" data-ref="n302"><a class="md-toc-inner" href="#header-n302">Exercícios 2.5.1 Tente responder essas questões:</a></span><span class="md-toc-item md-toc-h5" data-ref="n316"><a class="md-toc-inner" href="#header-n316">2.5.3 Criação e Alteração </a></span><span class="md-toc-item md-toc-h5" data-ref="n344"><a class="md-toc-inner" href="#header-n344">2.5.4  Ordenação</a></span><span class="md-toc-item md-toc-h5" data-ref="n351"><a class="md-toc-inner" href="#header-n351">2.5.6 Join </a></span><span class="md-toc-item md-toc-h5" data-ref="n438"><a class="md-toc-inner" href="#header-n438">2.5.7 Sumarizar</a></span><span class="md-toc-item md-toc-h5" data-ref="n451"><a class="md-toc-inner" href="#header-n451">2.5.8 Agrupar</a></span><span class="md-toc-item md-toc-h5" data-ref="n468"><a class="md-toc-inner" href="#header-n468">2.5.9 União , Interseção  e demais funções uteis </a></span><span class="md-toc-item md-toc-h5" data-ref="n482"><a class="md-toc-inner" href="#header-n482">2.5.10 Exercícios dplyr</a></span><span class="md-toc-item md-toc-h4" data-ref="n495"><a class="md-toc-inner" href="#header-n495">2.6 Trabalhando com Strings -  pacote stringr</a></span><span class="md-toc-item md-toc-h5" data-ref="n498"><a class="md-toc-inner" href="#header-n498">2.6.1 detecção de padrões</a></span><span class="md-toc-item md-toc-h5" data-ref="n513"><a class="md-toc-inner" href="#header-n513">2.6.2  Fazendo subsets das strings (substrings)</a></span><span class="md-toc-item md-toc-h5" data-ref="n520"><a class="md-toc-inner" href="#header-n520">2.6.3 verifica e altera o tamanho e realiza remoção de brancos</a></span><span class="md-toc-item md-toc-h5" data-ref="n532"><a class="md-toc-inner" href="#header-n532">2.6.4 alterando stings </a></span><span class="md-toc-item md-toc-h5" data-ref="n543"><a class="md-toc-inner" href="#header-n543">2.5.6 juntando, partindo e ordenando </a></span><span class="md-toc-item md-toc-h4" data-ref="n566"><a class="md-toc-inner" href="#header-n566">2.7 usando datas com o pacote lubridate</a></span></p></div><h2><a name='header-n3' class='md-header-anchor '></a>1. Arrumando os dados</h2><p>De agora em diante vamos usar como adotar como ferramenta de análise os pacotes do <strong>tidyverse</strong> , você provavelmente já deve ter usado alguma delas. </p><p>&nbsp;</p><p>Mas antes vamos falar do seu criador chamado  Hadley Wickham atualmente cientista chefe do  RStudio e professor adjunto de estatística da Universidade de  Auckland, na Nova Zelândia e
 mais recentemente das universidades de Stanford e Rice. Ele é um Cientista de Dados e é a mente responsável por vários pacotes do <strong>R</strong>, tanto pelo desenvolvimento quanto pelo aspecto conceitual desses pacotes. Um exemplo é o  ggplot. A preocupação dele ao criar esses pacotes foi tornar o <strong>R</strong> uma ferramenta mais poderosa e fácil de utilizar para Data Science. Esses pacotes lhe valeram um convite para se tornar uma peça chave no desenvolvimento e rumos do <em>RStudio</em>.</p><p>&nbsp;</p><p><img src='Hadley-wickham.jpg' alt='' referrerPolicy='no-referrer' />      <img src='cover.png' alt='' referrerPolicy='no-referrer' />    </p><p>&nbsp;</p><p>Ele é  autor do livro <em>R for data science</em> que pode ser encontrado na Amazon por cerca de US$ 25. No entanto, ele é um entusiasta não só de open source e de open science como também pratica o que prega e oferece seu livro gratuitamente no link <a href='http://r4ds.had.co.nz/' target='_blank' class='url'>http://r4ds.had.co.nz/</a>  . O livro é muito bom e muito desse curso foi inspirado nele, </p><h4><a name='header-n12' class='md-header-anchor '></a>1. o Tidyverse</h4><p>Diversos pacotes integram o tidyverse , cada pacote foi criado independente e depois foram integrados na forma desse &quot;metapacote&quot;. </p><p> </p><p>   <img src='tidyverse.png' alt='' referrerPolicy='no-referrer' />      <img src='tidyverse2.jpg' alt='' referrerPolicy='no-referrer' />   </p><p>&nbsp;</p><p>Alguns dos pacotes já são conhecidos por vocês como por exemplo o <em>ggplot2</em> e talvez alguns conheçam o <em>dplyr</em> o importante é dizer que tudo que esses pacotes fazem pode ser feito também ou pelo modulo base do <strong>R</strong> ou por algum outro pacote. </p><p>Então qual a vantagem? Como dito anteriormente esse conjunto de pacotes guardam mais do que uma coerência, possuem um conceito que simplifica e torna mais objetiva a realização de tarefas de arrumar os dados (tidy , quer dizer arrumar , ajeitar). Nesses pacotes as funções que fazem as operações em geral são verbos que deixam clara as ações envolvidas. veja o exemplo abaixo:</p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mtcars</span> <span class="cm-operator cm-variable-2">%&gt;%</span> <span class="cm-variable">select</span> (<span class="cm-variable">mpg</span>,<span class="cm-variable">cyl</span>,<span class="cm-variable">hp</span>,<span class="cm-variable">wt</span>) <span class="cm-operator cm-variable-2">%&gt;%</span> <span class="cm-variable">group_by</span>(<span class="cm-variable">cyl</span>) <span class="cm-operator cm-variable-2">%&gt;%</span> <span class="cm-variable">summarise</span>(<span class="cm-variable">hp_media</span><span class="cm-operator">=</span><span class="cm-variable">mean</span>(<span class="cm-variable">hp</span>),<span class="cm-variable">hp_min</span><span class="cm-operator">=</span><span class="cm-variable">min</span>(<span class="cm-variable">hp</span>),<span class="cm-variable">hp_max</span><span class="cm-operator">=</span><span class="cm-variable">max</span>(<span class="cm-variable">hp</span>),<span class="cm-variable">consumo_medio</span><span class="cm-operator">=</span><span class="cm-variable">mean</span>(<span class="cm-variable">mpg</span>)<span class="cm-operator">/</span><span class="cm-number">3.7</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><p>Em apenas uma linha estamos selecionando variáveis, agrupando por número de cilindros, e criado uma estatística sumária para a potência em HP e para o consume médio e transformando de galoes para litros(em 1974, aparentemente os carros bebiam muita gasolina!!!)</p><h2><a name='header-n22' class='md-header-anchor '></a>2. Preparando os dados</h2><p>Nos podemos organizar nossos dados em diversas formas, em geral usamos um formato tabular. </p><p>Entretanto, com frequência os dados ao serem importados não estão no formato adequado para a análise ou produção de gráficos exploratórios sendo necessário <strong>arrumar</strong> o dado para que fique em ul formato adequando.</p><p>Sob o ponto de vista formal queremos que:</p><ol start='' ><li>Cada variável forme uma coluna </li><li>Cada observação forme uma linha </li><li>O conjunto de linhas forme uma tabela</li></ol><p>Ou seja, em nossos dados uma coluna represente apenas uma variavel e uma linha uma observação formando uma tabela.</p><p>Veja as planilhas a planilha abaixo na qual cada coluna representa várias coisas, como sexo, ano e faixa etária.</p><p><img src='longa.png' alt='' referrerPolicy='no-referrer' /></p><p>ou nessa onde cada linha pode representa uma AP, um bairro ou o sexo</p><p><img src='erro_linha.png' alt='' referrerPolicy='no-referrer' /></p><p>&nbsp;</p><p>Veremos a seguir dois pacotes incluídos no  <strong>tidyverse</strong> são empregados para arrumar os dados, são eles   <strong>tidyr</strong> e  <strong>dplyr</strong> possuem funções que nos permite de uma maneira fácil ajeitar e transformar os dados. Vamos a seguir conhecer um pouco deles.</p><p>Uma característica importante dos pacotes do <strong>tidyverse</strong> são que as funções empregadas são em geral verbos que exprimem ações, como veremos a seguir.</p><h4><a name='header-n41' class='md-header-anchor '></a>2.1 Operador de Encadeamento (<em>PIPE</em>)</h4><p>Os pacotes do tideverse permitem o uso de encadeamento entre funções usando o operado %&gt;% como uma maneira de passar o resultado de uma função para a função seguinte. Em computação esse tipo de operador é conhecido por PIPE </p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mtcars %&gt;% head()</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><p>ou seja o data.frame mtcars e passado para a função seguinte, no caso head 
Esse operador permite encadearmos os resultados entre muitas funções e evita a necessidade de se armazenar repetidamente o resultado de cada função.</p><p> No formato normal de <strong>R</strong> um fluxo de análise  em geral </p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">dados</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">read.csv</span>(<span class="cm-string">'/caminho/documentos/arquivo.csv'</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">dados</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">subset</span>(<span class="cm-variable">dados</span>, <span class="cm-variable">var_a</span> &nbsp;<span class="cm-operator">&gt;</span> <span class="cm-variable">x</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">dados</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">transform</span>(<span class="cm-variable">dados</span>, <span class="cm-variable">var_c</span> <span class="cm-operator">=</span> <span class="cm-variable">var_a</span><span class="cm-operator">/</span><span class="cm-variable">var_b</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">dados</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">aggregate</span>(<span class="cm-variable">mtcars</span>, <span class="cm-variable">by</span><span class="cm-operator">=</span><span class="cm-builtin">list</span>(<span class="cm-variable">var_a</span>,<span class="cm-variable">var_b</span>), <span class="cm-variable">mean</span>, <span class="cm-variable">na.rm</span><span class="cm-operator">=</span><span class="cm-variable">TRUE</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 92px;"></div><div class="CodeMirror-gutters" style="display: none; height: 92px;"></div></div></div></pre><p>Usando o operador <strong>%&gt;%</strong>  teríamos algo como:</p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">dados</span> <span class="cm-operator cm-arrow">&lt;-</span> &nbsp;<span class="cm-variable">read.csv</span>(<span class="cm-string">'/caminho/documentos/arquivo.csv'</span>) <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> &nbsp;<span class="cm-variable">subset</span>( <span class="cm-variable">var_a</span> &nbsp;<span class="cm-operator">&gt;</span> <span class="cm-variable">x</span>) <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> &nbsp;<span class="cm-variable">transform</span>( <span class="cm-variable">var_c</span> <span class="cm-operator">=</span> <span class="cm-variable">var_a</span><span class="cm-operator">/</span><span class="cm-variable">var_b</span>) <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-tab" role="presentation" cm-text="	">   </span> &nbsp;<span class="cm-variable">aggregate</span>(<span class="cm-variable">by</span><span class="cm-operator">=</span><span class="cm-builtin">list</span>(<span class="cm-variable">var_a</span>,<span class="cm-variable">var_b</span>), <span class="cm-variable">mean</span>, <span class="cm-variable">na.rm</span><span class="cm-operator">=</span><span class="cm-variable">TRUE</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 92px;"></div><div class="CodeMirror-gutters" style="display: none; height: 92px;"></div></div></div></pre><p>Repare que não usamos nenhuma função do <strong>tidyverse</strong> apenas o modulo base do <strong>R</strong>, usando o <em>PIPE</em> com as funções dos pacotes do <strong>tidyverse</strong> temos maior flexibilidade ainda!</p><p>Vamos agora conhecer alguns dos pacotes que compõem o <strong>tideverse</strong>.</p><h4><a name='header-n52' class='md-header-anchor '></a>2.2 Tribble</h4><p>Uma tribble (tbl_df) é uma classe criado com o objeto de atualizar um data.frame , mantendo o que ele tem de positivo e mudando aspectos que os autores julgam obsoletos ou não funcionais. Ele não substitui todos os métodos providos pelo data.frame , no entanto a tribble é mais rápida e possuí métodos aprimorados e mais modernos, seguros para utilizar e exibir tabelas.</p><p>Criando uma tribble</p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><span><span>​</span>x</span></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">tidyverse</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">IMC</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">data_frame</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">nomes</span> <span class="cm-arg-is">=</span> <span class="cm-variable">c</span>(<span class="cm-string">"João"</span>, <span class="cm-string">"Maria"</span>, <span class="cm-string">"Carlos"</span>, <span class="cm-string">"Ana"</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">idade</span> <span class="cm-arg-is">=</span> <span class="cm-variable">as.integer</span>(<span class="cm-variable">c</span>(<span class="cm-number">27</span>, <span class="cm-number">25</span>, <span class="cm-number">29</span>, <span class="cm-number">26</span>)),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">sexo</span> <span class="cm-arg-is">=</span> <span class="cm-variable">as.factor</span>(<span class="cm-variable">c</span>(<span class="cm-string">'M'</span>,<span class="cm-string">'F'</span>,<span class="cm-string">'M'</span>,<span class="cm-string">'F'</span>)),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">altura</span> <span class="cm-arg-is">=</span> <span class="cm-variable">c</span>(<span class="cm-number">180</span>, <span class="cm-number">170</span>, <span class="cm-number">185</span>, <span class="cm-number">169</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">peso</span> <span class="cm-arg-is">=</span> <span class="cm-variable">c</span>(<span class="cm-number">92.3</span>,<span class="cm-number">71.1</span>,<span class="cm-number">88.5</span>,<span class="cm-number">63.6</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">dt_nasc</span> <span class="cm-arg-is">=</span> <span class="cm-variable">lubridate</span><span class="cm-operator">::</span><span class="cm-variable">dmy</span>(<span class="cm-variable">c</span>(<span class="cm-string">'03/08/1990'</span>,<span class="cm-string">'15/12/1992'</span>,<span class="cm-string">'05-07-1988'</span>,<span class="cm-string">'06-08-1991'</span>)) ,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">exercicio</span> <span class="cm-arg-is">=</span> <span class="cm-variable">c</span>(<span class="cm-variable">TRUE</span>, <span class="cm-variable">FALSE</span>, <span class="cm-variable">FALSE</span>, <span class="cm-variable">TRUE</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 299px;"></div><div class="CodeMirror-gutters" style="display: none; height: 299px;"></div></div></div></pre><p>O comando acima cria uma tribble a partir de vetores , exatamente como fariamso com um <em>data.frame</em> note entretanto que usamos a função <em>data_frame</em>  </p><p>Vamos verificar agora o conteúdo desse objeto</p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">IMC</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># A tibble: 4 x 7</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-variable">nomes</span> <span class="cm-variable">idade</span> &nbsp; <span class="cm-variable">sexo</span> <span class="cm-variable">altura</span> &nbsp;<span class="cm-variable">peso</span> &nbsp; &nbsp;<span class="cm-variable">dt_nasc</span> <span class="cm-variable">exercicio</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-operator">&lt;</span><span class="cm-variable">chr</span><span class="cm-operator">&gt;</span> <span class="cm-operator">&lt;</span><span class="cm-variable">int</span><span class="cm-operator">&gt;</span> <span class="cm-operator">&lt;</span><span class="cm-variable">fctr</span><span class="cm-operator">&gt;</span> &nbsp;<span class="cm-operator">&lt;</span><span class="cm-variable">dbl</span><span class="cm-operator">&gt;</span> <span class="cm-operator">&lt;</span><span class="cm-variable">dbl</span><span class="cm-operator">&gt;</span> &nbsp; &nbsp; <span class="cm-operator">&lt;</span><span class="cm-variable">date</span><span class="cm-operator">&gt;</span> &nbsp; &nbsp; <span class="cm-operator">&lt;</span><span class="cm-variable">lgl</span><span class="cm-operator">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> &nbsp; <span class="cm-variable">Jo</span>ã<span class="cm-variable">o</span> &nbsp; &nbsp;<span class="cm-number">27</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">M</span> &nbsp; &nbsp;<span class="cm-number">180</span> &nbsp;<span class="cm-number">92.3</span> <span class="cm-number">1990</span><span class="cm-operator">-</span><span class="cm-number">08</span><span class="cm-operator">-</span><span class="cm-number">03</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">TRUE</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">2</span> &nbsp;<span class="cm-variable">Maria</span> &nbsp; &nbsp;<span class="cm-number">25</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">F</span> &nbsp; &nbsp;<span class="cm-number">170</span> &nbsp;<span class="cm-number">71.1</span> <span class="cm-number">1992</span><span class="cm-operator">-</span><span class="cm-number">12</span><span class="cm-operator">-</span><span class="cm-number">15</span> &nbsp; &nbsp; <span class="cm-variable">FALSE</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">3</span> <span class="cm-variable">Carlos</span> &nbsp; &nbsp;<span class="cm-number">29</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">M</span> &nbsp; &nbsp;<span class="cm-number">185</span> &nbsp;<span class="cm-number">88.5</span> <span class="cm-number">1988</span><span class="cm-operator">-</span><span class="cm-number">07</span><span class="cm-operator">-</span><span class="cm-number">05</span> &nbsp; &nbsp; <span class="cm-variable">FALSE</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">4</span> &nbsp; &nbsp;<span class="cm-variable">Ana</span> &nbsp; &nbsp;<span class="cm-number">26</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">F</span> &nbsp; &nbsp;<span class="cm-number">169</span> &nbsp;<span class="cm-number">63.6</span> <span class="cm-number">1991</span><span class="cm-operator">-</span><span class="cm-number">08</span><span class="cm-operator">-</span><span class="cm-number">06</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">TRUE</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 184px;"></div><div class="CodeMirror-gutters" style="display: none; height: 184px;"></div></div></div></pre><p>Note que em primeiro lugar no <em>output</em> já nos informa que o objeto é uma <em>tribble</em> com 4 linhas e 7 colunas.  Abaixo do nome de cada coluna temos o tipo, se é caractere, numérico (double, ou Integer) , fator, data ou lógico. Outra característica importante é que por default nenhuma caractere é convertido para <em>factor</em> como acontece atualmente por default nos <em>data.frame</em> </p><p>Vamos ver a classe a que pertence esse objeto:</p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">class</span>(<span class="cm-variable">IMC</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-string">"tbl_df"</span> &nbsp; &nbsp; <span class="cm-string">"tbl"</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"data.frame"</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><p>&nbsp;</p><p>repare que ele também pertence a classe <em>data.frame</em> assim a grande maioria das funções que usamos para manusear objetos da classe <em>data.frame</em> podem ser empregados também na classe <em>tbl_df</em> com algumas diferenças. </p><p>Para ilustrar as  e similaridades vamos em primeiro lugar converter um <em>data.frame</em> e criar um objeto <em>tribble</em>.</p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">iris_tb</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">as_tibble</span>(<span class="cm-variable">iris</span>) <span class="cm-comment"># ou as_data_frame</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">class</span>(<span class="cm-variable">iris_tb</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><p>Vamos testar a indexação de ambas as classes</p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># data.frame</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">iris</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">Species</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">iris</span>[[<span class="cm-number">4</span>]]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">iris</span>[[<span class="cm-string">'Species'</span>]]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># tribble</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">iris_tb</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">Species</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">iris_tb</span>[[<span class="cm-number">4</span>]]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">iris_tb</span>[[<span class="cm-string">'Species'</span>]]</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 184px;"></div><div class="CodeMirror-gutters" style="display: none; height: 184px;"></div></div></div></pre><p>Como se pode notar o comportamento aqui é idêntico entre ambas.</p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">iris</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">Sepal.L</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">iris_tb</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">Sepal.L</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><p>O que aconteceu? você sabe explicar? </p><blockquote><p>Não sei se você se lembra mas em <em>data.frame</em> podemos nos referir ao nome de uma coluna de uma maneira parcial,  desde que o nome seja inequívoco, no exemplo acima &#39;iris$Sepal.L&#39;  mostra somente a coluna &#39;Sepal.Length&#39; , no entanto essa maneira <strong>não</strong> funciona nos objetos <em>tribble</em>. </p></blockquote><p>uma outra diferença importante está no fato de que se pedirmos uma coluna <strong>inexistente</strong> a um <em>data.frame</em> esle retorna <strong>NULL</strong> no entanto não há nenhum erro e nem <em>warning</em>  já a <em>tribble</em> retorna <strong>NULL</strong> mas gera um <em>warning</em> o que é importante quando estamos desenvolvendo funções. </p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">iris</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">z</span> &nbsp; <span class="cm-comment"># retorna NULL e não gera warning</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">iris_tb</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">z</span> &nbsp;<span class="cm-comment"># Warning </span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><p>&nbsp;</p><p>Existem outras maneiras de criar uma <em>tribble</em> o exemplo abaixo mostra uma delas:
Repare que ao invés de especificarmos os tipos simplesmente entramos com cada linha. a primeira linha deve ter o nome de cada coluna precedida por um <em>~</em> (til)</p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">zika</span> <span class="cm-operator cm-arrow">&lt;-</span> &nbsp;<span class="cm-variable">tribble</span>(</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-operator">~</span><span class="cm-variable">UF</span>, <span class="cm-operator">~</span><span class="cm-variable">Casos</span>, <span class="cm-operator">~</span><span class="cm-variable">Incidencia</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string">"MG"</span>, <span class="cm-number">15211</span>, &nbsp;<span class="cm-number">72.9</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string">"ES"</span>, &nbsp;<span class="cm-number">2321</span>, &nbsp;<span class="cm-number">59.1</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string">"RJ"</span>, <span class="cm-number">67481</span>, <span class="cm-number">407.7</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string">"SP"</span>, &nbsp;<span class="cm-number">5612</span>, &nbsp;<span class="cm-number">12.6</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  )</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 184px;"></div><div class="CodeMirror-gutters" style="display: none; height: 184px;"></div></div></div></pre><p>&nbsp;</p><p>Mais uma diferença está no fato que <em>tribble</em> não possui nome de linha!</p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">row.names</span>(<span class="cm-variable">zika</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">row.names</span>(<span class="cm-variable">zika</span>) <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">letters</span>[<span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">4</span>]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">zika</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 69px;"></div><div class="CodeMirror-gutters" style="display: none; height: 69px;"></div></div></div></pre><p>&nbsp;</p><p>no entanto a função <em>names</em> continua funcionando como sempre.</p><p>&nbsp;</p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">names</span>(<span class="cm-variable">zika</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">names</span>(<span class="cm-variable">zika</span>) <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">c</span>(<span class="cm-string">'uf'</span>,<span class="cm-string">'cases'</span>,<span class="cm-string">'incidence'</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">zika</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 69px;"></div><div class="CodeMirror-gutters" style="display: none; height: 69px;"></div></div></div></pre><p>Para vermos a estrutura dos dados podemos usar a função <strong>glimpse()</strong> que é a correspondente a função <strong>str()</strong> do modulo base.</p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">glimpse</span>(<span class="cm-variable">zika</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><p>Apesar de não existirem grandes diferenças entre <em>data.frame</em> e <em>tribble</em> como foi visto, a velocidade ,segurança e facilidades na visualização além do fato de pertencer ao <em>tidyverse</em> e seu ecossistemas de pacotes  parecem bons motivos para sua utilização.</p><p>&nbsp;</p><p>&nbsp;</p><h4><a name='header-n92' class='md-header-anchor '></a>2.3 readr</h4><p>O objetivo do pacote <em>readr</em> é prover uma maneira rápida e amigável para ler no <strong>R</strong> dados tabulares de diversos formatos tais como csv, tsv, fwf etc... Suas funções são desenhadas com flexibilidade para identificar os tipos de cada coluna e facilitar a identificação de problemas dentro dos dados (quebra de padrões) </p><p>o processo de importação dos dados passa por 3 estágios básicos:</p><ul><li>a leitura em um formato &quot;retangular&quot; , ou seja uma matriz de strings</li><li>determinação do tipo de cada coluna</li><li>transformações necessárias a cada coluna dado seu tipo</li></ul><p>o pacote <em>readr</em> faz isso de uma maneira muito mais rápida que as tracionais funções do pacote básico, e além do mais permite facilmente especificar o formato das colunas de uma maneira mais simples e precisa. </p><p>o <em>readr</em> possui 5 funções básicas para ler os dados </p><ul><li><strong>read_table()</strong>  arquivos seprados por espaço</li><li><strong>read_csv()</strong> e <strong>read_csv2()</strong> para arquivos do tipo .csv separador por &#39;,&#39; ou &#39;;&#39;</li><li><strong>read_tsv()</strong>  para arquvios separados por <em>tabs</em> (\t)</li><li><strong>read_fwf()</strong>  para arquivos com formato fixo </li></ul><p>Todas as funções possuem diversas opções de parâmetros  para melhor especificar o formato dos dados.  Existem também todas as funções para fazer a escrita, exemplo write_csv.</p><h5><a name='header-n115' class='md-header-anchor '></a>2.3.1 Exemplo PNAD</h5><p>Vamos partir para um exemplo, ler um arquivo da Pesquisa Nacional Por Amostra de Domicílios (PNAD) de 2003. Esse arquivo consta de quase 400.000 registros e 39 variáveis , se encontra em formato CSV, compactado em formato ZIP.</p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">local</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-string">'http://gitlab.procc.fiocruz.br/oswaldo/DS_2017/raw/master/exemplos/pnad.zip'</span> </span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 69px;"></div><div class="CodeMirror-gutters" style="display: none; height: 69px;"></div></div></div></pre><p>Vamos fazer o download do arquivo acima como visto no capítulo de importação</p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">temp</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">tempdir</span>() &nbsp; <span class="cm-comment"># seleciona um diretorio temp </span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">arq</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">paste</span>(<span class="cm-variable">temp</span>,<span class="cm-string">'pnad.zip'</span>,<span class="cm-variable">sep</span><span class="cm-operator">=</span><span class="cm-string">'/'</span>) &nbsp;<span class="cm-comment"># gera o nome do arquivo </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">download.file</span>(<span class="cm-variable">local</span>,<span class="cm-variable">arq</span>) &nbsp;<span class="cm-comment"># faz o download</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 92px;"></div><div class="CodeMirror-gutters" style="display: none; height: 92px;"></div></div></div></pre><p>Agora vamos fazer a importação propriamente dita</p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">pnad</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">read_csv2</span>(<span class="cm-variable">unzip</span>(<span class="cm-variable">arq</span>))</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><p>Observe que recebemos uma mensagem de <em>warning</em> </p><blockquote><p>Using &#39;,&#39; as decimal and &#39;.&#39; as grouping mark. Use read_delim() for more control.
Parsed with column specification:
cols(
  .default = col_integer(),
  COD_PESS = col_double()
)
See spec(...) for full column specifications.</p></blockquote><p>A função está avisando duas coisas:</p><p>a. que usou &#39;,&#39; como separador decimal e &#39;.&#39; como separador de mil, e se quiseremos mais opções de controle devemos usar a função <strong>read_delim</strong> </p><p>b. que usou com default que todas as colunas eram de inteiros com exceção a variável COD_PESS que foi usado o tipo double</p><p>Vamos inspecionar o objeto que retornou</p><p>&nbsp;</p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">pnad</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># A tibble: 384,834 x 39</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-variable">COD_PESS</span> &nbsp; &nbsp;<span class="cm-variable">UF</span> <span class="cm-variable">V0302</span> <span class="cm-variable">V8005</span> <span class="cm-variable">V1703</span> <span class="cm-variable">V1704</span> <span class="cm-variable">V1705</span> <span class="cm-variable">V1303</span> <span class="cm-variable">V1304</span> <span class="cm-variable">V1347</span> <span class="cm-variable">V1349</span> <span class="cm-variable">V1369</span> <span class="cm-variable">V4729</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">&lt;</span><span class="cm-variable">dbl</span><span class="cm-operator">&gt;</span> <span class="cm-operator">&lt;</span><span class="cm-variable">int</span><span class="cm-operator">&gt;</span> <span class="cm-operator">&lt;</span><span class="cm-variable">int</span><span class="cm-operator">&gt;</span> <span class="cm-operator">&lt;</span><span class="cm-variable">int</span><span class="cm-operator">&gt;</span> <span class="cm-operator">&lt;</span><span class="cm-variable">int</span><span class="cm-operator">&gt;</span> <span class="cm-operator">&lt;</span><span class="cm-variable">int</span><span class="cm-operator">&gt;</span> <span class="cm-operator">&lt;</span><span class="cm-variable">int</span><span class="cm-operator">&gt;</span> <span class="cm-operator">&lt;</span><span class="cm-variable">int</span><span class="cm-operator">&gt;</span> <span class="cm-operator">&lt;</span><span class="cm-variable">int</span><span class="cm-operator">&gt;</span> <span class="cm-operator">&lt;</span><span class="cm-variable">int</span><span class="cm-operator">&gt;</span> <span class="cm-operator">&lt;</span><span class="cm-variable">int</span><span class="cm-operator">&gt;</span> <span class="cm-operator">&lt;</span><span class="cm-variable">int</span><span class="cm-operator">&gt;</span> <span class="cm-operator">&lt;</span><span class="cm-variable">int</span><span class="cm-operator">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-number">1</span> <span class="cm-number">1.100002e+13</span> &nbsp; &nbsp;<span class="cm-number">11</span> &nbsp; &nbsp; <span class="cm-number">2</span> &nbsp; &nbsp;<span class="cm-number">49</span> &nbsp; &nbsp;<span class="cm-atom">NA</span> &nbsp; &nbsp;<span class="cm-atom">NA</span> &nbsp; &nbsp;<span class="cm-atom">NA</span> &nbsp; &nbsp; <span class="cm-number">2</span> &nbsp; &nbsp; <span class="cm-number">4</span> &nbsp; &nbsp; <span class="cm-number">3</span> &nbsp; &nbsp; <span class="cm-number">5</span> &nbsp; &nbsp; <span class="cm-number">3</span> &nbsp; <span class="cm-number">218</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-number">2</span> <span class="cm-number">1.100002e+13</span> &nbsp; &nbsp;<span class="cm-number">11</span> &nbsp; &nbsp; <span class="cm-number">4</span> &nbsp; &nbsp;<span class="cm-number">31</span> &nbsp; &nbsp; <span class="cm-number">7</span> &nbsp; &nbsp; <span class="cm-number">8</span> &nbsp; &nbsp; <span class="cm-number">1</span> &nbsp; &nbsp; <span class="cm-number">3</span> &nbsp; &nbsp; <span class="cm-number">4</span> &nbsp; &nbsp; <span class="cm-number">1</span> &nbsp; &nbsp; <span class="cm-number">5</span> &nbsp; &nbsp; <span class="cm-number">1</span> &nbsp; <span class="cm-number">218</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-number">3</span> <span class="cm-number">1.100002e+13</span> &nbsp; &nbsp;<span class="cm-number">11</span> &nbsp; &nbsp; <span class="cm-number">2</span> &nbsp; &nbsp;<span class="cm-number">51</span> &nbsp; &nbsp;<span class="cm-atom">NA</span> &nbsp; &nbsp;<span class="cm-atom">NA</span> &nbsp; &nbsp;<span class="cm-atom">NA</span> &nbsp; &nbsp; <span class="cm-number">2</span> &nbsp; &nbsp; <span class="cm-number">4</span> &nbsp; &nbsp; <span class="cm-number">3</span> &nbsp; &nbsp; <span class="cm-number">1</span> &nbsp; &nbsp; <span class="cm-number">3</span> &nbsp; <span class="cm-number">218</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-number">4</span> <span class="cm-number">1.100002e+13</span> &nbsp; &nbsp;<span class="cm-number">11</span> &nbsp; &nbsp; <span class="cm-number">4</span> &nbsp; &nbsp;<span class="cm-number">46</span> &nbsp; &nbsp; <span class="cm-number">7</span> &nbsp; &nbsp; <span class="cm-number">8</span> &nbsp; &nbsp; <span class="cm-number">7</span> &nbsp; &nbsp; <span class="cm-number">2</span> &nbsp; &nbsp; <span class="cm-number">4</span> &nbsp; &nbsp; <span class="cm-number">3</span> &nbsp; &nbsp; <span class="cm-number">5</span> &nbsp; &nbsp; <span class="cm-number">3</span> &nbsp; <span class="cm-number">217</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-number">5</span> <span class="cm-number">1.100002e+13</span> &nbsp; &nbsp;<span class="cm-number">11</span> &nbsp; &nbsp; <span class="cm-number">2</span> &nbsp; &nbsp;<span class="cm-number">29</span> &nbsp; &nbsp;<span class="cm-atom">NA</span> &nbsp; &nbsp;<span class="cm-atom">NA</span> &nbsp; &nbsp;<span class="cm-atom">NA</span> &nbsp; &nbsp; <span class="cm-number">2</span> &nbsp; &nbsp; <span class="cm-number">4</span> &nbsp; &nbsp; <span class="cm-number">3</span> &nbsp; &nbsp; <span class="cm-number">5</span> &nbsp; &nbsp; <span class="cm-number">3</span> &nbsp; <span class="cm-number">218</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-number">6</span> <span class="cm-number">1.100002e+13</span> &nbsp; &nbsp;<span class="cm-number">11</span> &nbsp; &nbsp; <span class="cm-number">4</span> &nbsp; &nbsp;<span class="cm-number">18</span> &nbsp; &nbsp;<span class="cm-atom">NA</span> &nbsp; &nbsp;<span class="cm-atom">NA</span> &nbsp; &nbsp;<span class="cm-atom">NA</span> &nbsp; &nbsp; <span class="cm-number">2</span> &nbsp; &nbsp; <span class="cm-number">4</span> &nbsp; &nbsp; <span class="cm-number">1</span> &nbsp; &nbsp; <span class="cm-number">7</span> &nbsp; &nbsp; <span class="cm-number">3</span> &nbsp; <span class="cm-number">218</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-number">7</span> <span class="cm-number">1.100002e+13</span> &nbsp; &nbsp;<span class="cm-number">11</span> &nbsp; &nbsp; <span class="cm-number">2</span> &nbsp; &nbsp;<span class="cm-number">35</span> &nbsp; &nbsp;<span class="cm-atom">NA</span> &nbsp; &nbsp;<span class="cm-atom">NA</span> &nbsp; &nbsp;<span class="cm-atom">NA</span> &nbsp; &nbsp; <span class="cm-number">2</span> &nbsp; &nbsp; <span class="cm-number">4</span> &nbsp; &nbsp; <span class="cm-number">1</span> &nbsp; &nbsp; <span class="cm-number">5</span> &nbsp; &nbsp; <span class="cm-number">3</span> &nbsp; <span class="cm-number">218</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-number">8</span> <span class="cm-number">1.100002e+13</span> &nbsp; &nbsp;<span class="cm-number">11</span> &nbsp; &nbsp; <span class="cm-number">4</span> &nbsp; &nbsp;<span class="cm-number">24</span> &nbsp; &nbsp;<span class="cm-atom">NA</span> &nbsp; &nbsp;<span class="cm-atom">NA</span> &nbsp; &nbsp;<span class="cm-atom">NA</span> &nbsp; &nbsp; <span class="cm-number">2</span> &nbsp; &nbsp; <span class="cm-number">4</span> &nbsp; &nbsp; <span class="cm-number">1</span> &nbsp; &nbsp; <span class="cm-number">3</span> &nbsp; &nbsp; <span class="cm-number">3</span> &nbsp; <span class="cm-number">218</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-number">9</span> <span class="cm-number">1.100002e+13</span> &nbsp; &nbsp;<span class="cm-number">11</span> &nbsp; &nbsp; <span class="cm-number">2</span> &nbsp; &nbsp; <span class="cm-number">6</span> &nbsp; &nbsp;<span class="cm-atom">NA</span> &nbsp; &nbsp;<span class="cm-atom">NA</span> &nbsp; &nbsp;<span class="cm-atom">NA</span> &nbsp; &nbsp; <span class="cm-number">2</span> &nbsp; &nbsp; <span class="cm-number">4</span> &nbsp; &nbsp; <span class="cm-number">1</span> &nbsp; &nbsp; <span class="cm-number">7</span> &nbsp; &nbsp; <span class="cm-number">3</span> &nbsp; <span class="cm-number">218</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">10</span> <span class="cm-number">1.100002e+13</span> &nbsp; &nbsp;<span class="cm-number">11</span> &nbsp; &nbsp; <span class="cm-number">4</span> &nbsp; &nbsp; <span class="cm-number">4</span> &nbsp; &nbsp;<span class="cm-atom">NA</span> &nbsp; &nbsp;<span class="cm-atom">NA</span> &nbsp; &nbsp;<span class="cm-atom">NA</span> &nbsp; &nbsp; <span class="cm-number">2</span> &nbsp; &nbsp; <span class="cm-number">4</span> &nbsp; &nbsp; <span class="cm-number">1</span> &nbsp; &nbsp; <span class="cm-number">7</span> &nbsp; &nbsp; <span class="cm-number">3</span> &nbsp; <span class="cm-number">218</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># ... with 384,824 more rows, and 26 more variables: REGIAO &lt;int&gt;, AUTO_DIC &lt;int&gt;,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># &nbsp; DENTISTA &lt;int&gt;, USO_DIC &lt;int&gt;, SMPC &lt;int&gt;, DENTIS_A &lt;int&gt;, PLANO_DC &lt;int&gt;,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># &nbsp; EX_MAMA &lt;int&gt;, E_SERIES &lt;int&gt;, FETAR_MU &lt;int&gt;, V1374 &lt;int&gt;, V1375 &lt;int&gt;, V1376 &lt;int&gt;,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># &nbsp; V4617 &lt;int&gt;, V4618 &lt;int&gt;, V1364 &lt;int&gt;, V1365 &lt;int&gt;, V1366 &lt;int&gt;, FETAR_AG &lt;int&gt;,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># &nbsp; V0404 &lt;int&gt;, V1361 &lt;int&gt;, V1373 &lt;int&gt;, RUR_URB &lt;int&gt;, V4609 &lt;int&gt;, V4610 &lt;int&gt;,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># &nbsp; EST_PROJ &lt;int&gt;</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 483px;"></div><div class="CodeMirror-gutters" style="display: none; height: 483px;"></div></div></div></pre><p>Como podemos observar tudo parace OK, exceto pela coluna COD_PESS que contem um longo numero que identifica o setor censitario, o domicilio e a posição da pessoa. seria portanto melhor ler esse campo como <em>caractere</em> . vamos utilizar a função <strong>spec()</strong> que vai estrair as especificações usadas em cada coluna.</p><p>&nbsp;</p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">colunas</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">spec</span>(<span class="cm-variable">pnad</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">colunas</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">cols</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">COD_PESS</span> <span class="cm-arg-is">=</span> <span class="cm-variable">col_double</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">UF</span> <span class="cm-arg-is">=</span> <span class="cm-variable">col_integer</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">V0302</span> <span class="cm-arg-is">=</span> <span class="cm-variable">col_integer</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">V8005</span> <span class="cm-arg-is">=</span> <span class="cm-variable">col_integer</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">. .</span> <span class="cm-variable">.</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">RUR_URB</span> <span class="cm-arg-is">=</span> <span class="cm-variable">col_integer</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">V4609</span> <span class="cm-arg-is">=</span> <span class="cm-variable">col_integer</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">V4610</span> <span class="cm-arg-is">=</span> <span class="cm-variable">col_integer</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">EST_PROJ</span> <span class="cm-arg-is">=</span> <span class="cm-variable">col_integer</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 322px;"></div><div class="CodeMirror-gutters" style="display: none; height: 322px;"></div></div></div></pre><p>Como se pode observar fora a primeira coluna COD_PESS que foi lida como <em>double</em> todas as demais foram lidas como <em>integer</em>. Vamos modificar esse objeto <em>colunas</em> para que a primeira coluna seja lida como <em>caractere</em> e vamos ler novamente passando a informação sobre as colunas.</p><p>&nbsp;</p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">colunas</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">cols</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">COD_PESS</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">col_character</span>() &nbsp;<span class="cm-comment">#altera a coluna COD_PESS </span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">pnad2</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">read_csv2</span>(<span class="cm-variable">arq</span>,<span class="cm-variable">col_types</span> <span class="cm-operator">=</span> <span class="cm-variable">colunas</span>) <span class="cm-comment"># le novamente usando o formato das colunas</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 69px;"></div><div class="CodeMirror-gutters" style="display: none; height: 69px;"></div></div></div></pre><p>Repare que desta vez passamos o <em>arq</em> em formto <em>zip</em> diretamente para a função!</p><p>A seguir para exibir o resultado.</p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">pnad2</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># A tibble: 384,834 x 39</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">COD_PESS</span> &nbsp; &nbsp;<span class="cm-variable">UF</span> <span class="cm-variable">V0302</span> <span class="cm-variable">V8005</span> <span class="cm-variable">V1703</span> <span class="cm-variable">V1704</span> <span class="cm-variable">V1705</span> <span class="cm-variable">V1303</span> <span class="cm-variable">V1304</span> <span class="cm-variable">V1347</span> <span class="cm-variable">V1349</span> <span class="cm-variable">V1369</span> <span class="cm-variable">V4729</span> <span class="cm-variable">REGIAO</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">&lt;</span><span class="cm-variable">chr</span><span class="cm-operator">&gt;</span> <span class="cm-operator">&lt;</span><span class="cm-variable">int</span><span class="cm-operator">&gt;</span> <span class="cm-operator">&lt;</span><span class="cm-variable">int</span><span class="cm-operator">&gt;</span> <span class="cm-operator">&lt;</span><span class="cm-variable">int</span><span class="cm-operator">&gt;</span> <span class="cm-operator">&lt;</span><span class="cm-variable">int</span><span class="cm-operator">&gt;</span> <span class="cm-operator">&lt;</span><span class="cm-variable">int</span><span class="cm-operator">&gt;</span> <span class="cm-operator">&lt;</span><span class="cm-variable">int</span><span class="cm-operator">&gt;</span> <span class="cm-operator">&lt;</span><span class="cm-variable">int</span><span class="cm-operator">&gt;</span> <span class="cm-operator">&lt;</span><span class="cm-variable">int</span><span class="cm-operator">&gt;</span> <span class="cm-operator">&lt;</span><span class="cm-variable">int</span><span class="cm-operator">&gt;</span> <span class="cm-operator">&lt;</span><span class="cm-variable">int</span><span class="cm-operator">&gt;</span> <span class="cm-operator">&lt;</span><span class="cm-variable">int</span><span class="cm-operator">&gt;</span> <span class="cm-operator">&lt;</span><span class="cm-variable">int</span><span class="cm-operator">&gt;</span> &nbsp;<span class="cm-operator">&lt;</span><span class="cm-variable">int</span><span class="cm-operator">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-number">1</span> <span class="cm-number">11000015001011</span> &nbsp; &nbsp;<span class="cm-number">11</span> &nbsp; &nbsp; <span class="cm-number">2</span> &nbsp; &nbsp;<span class="cm-number">49</span> &nbsp; &nbsp;<span class="cm-atom">NA</span> &nbsp; &nbsp;<span class="cm-atom">NA</span> &nbsp; &nbsp;<span class="cm-atom">NA</span> &nbsp; &nbsp; <span class="cm-number">2</span> &nbsp; &nbsp; <span class="cm-number">4</span> &nbsp; &nbsp; <span class="cm-number">3</span> &nbsp; &nbsp; <span class="cm-number">5</span> &nbsp; &nbsp; <span class="cm-number">3</span> &nbsp; <span class="cm-number">218</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-number">2</span> <span class="cm-number">11000015001021</span> &nbsp; &nbsp;<span class="cm-number">11</span> &nbsp; &nbsp; <span class="cm-number">4</span> &nbsp; &nbsp;<span class="cm-number">31</span> &nbsp; &nbsp; <span class="cm-number">7</span> &nbsp; &nbsp; <span class="cm-number">8</span> &nbsp; &nbsp; <span class="cm-number">1</span> &nbsp; &nbsp; <span class="cm-number">3</span> &nbsp; &nbsp; <span class="cm-number">4</span> &nbsp; &nbsp; <span class="cm-number">1</span> &nbsp; &nbsp; <span class="cm-number">5</span> &nbsp; &nbsp; <span class="cm-number">1</span> &nbsp; <span class="cm-number">218</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-number">3</span> <span class="cm-number">11000015002011</span> &nbsp; &nbsp;<span class="cm-number">11</span> &nbsp; &nbsp; <span class="cm-number">2</span> &nbsp; &nbsp;<span class="cm-number">51</span> &nbsp; &nbsp;<span class="cm-atom">NA</span> &nbsp; &nbsp;<span class="cm-atom">NA</span> &nbsp; &nbsp;<span class="cm-atom">NA</span> &nbsp; &nbsp; <span class="cm-number">2</span> &nbsp; &nbsp; <span class="cm-number">4</span> &nbsp; &nbsp; <span class="cm-number">3</span> &nbsp; &nbsp; <span class="cm-number">1</span> &nbsp; &nbsp; <span class="cm-number">3</span> &nbsp; <span class="cm-number">218</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-number">4</span> <span class="cm-number">11000015002021</span> &nbsp; &nbsp;<span class="cm-number">11</span> &nbsp; &nbsp; <span class="cm-number">4</span> &nbsp; &nbsp;<span class="cm-number">46</span> &nbsp; &nbsp; <span class="cm-number">7</span> &nbsp; &nbsp; <span class="cm-number">8</span> &nbsp; &nbsp; <span class="cm-number">7</span> &nbsp; &nbsp; <span class="cm-number">2</span> &nbsp; &nbsp; <span class="cm-number">4</span> &nbsp; &nbsp; <span class="cm-number">3</span> &nbsp; &nbsp; <span class="cm-number">5</span> &nbsp; &nbsp; <span class="cm-number">3</span> &nbsp; <span class="cm-number">217</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-number">5</span> <span class="cm-number">11000015002032</span> &nbsp; &nbsp;<span class="cm-number">11</span> &nbsp; &nbsp; <span class="cm-number">2</span> &nbsp; &nbsp;<span class="cm-number">29</span> &nbsp; &nbsp;<span class="cm-atom">NA</span> &nbsp; &nbsp;<span class="cm-atom">NA</span> &nbsp; &nbsp;<span class="cm-atom">NA</span> &nbsp; &nbsp; <span class="cm-number">2</span> &nbsp; &nbsp; <span class="cm-number">4</span> &nbsp; &nbsp; <span class="cm-number">3</span> &nbsp; &nbsp; <span class="cm-number">5</span> &nbsp; &nbsp; <span class="cm-number">3</span> &nbsp; <span class="cm-number">218</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-number">6</span> <span class="cm-number">11000015002042</span> &nbsp; &nbsp;<span class="cm-number">11</span> &nbsp; &nbsp; <span class="cm-number">4</span> &nbsp; &nbsp;<span class="cm-number">18</span> &nbsp; &nbsp;<span class="cm-atom">NA</span> &nbsp; &nbsp;<span class="cm-atom">NA</span> &nbsp; &nbsp;<span class="cm-atom">NA</span> &nbsp; &nbsp; <span class="cm-number">2</span> &nbsp; &nbsp; <span class="cm-number">4</span> &nbsp; &nbsp; <span class="cm-number">1</span> &nbsp; &nbsp; <span class="cm-number">7</span> &nbsp; &nbsp; <span class="cm-number">3</span> &nbsp; <span class="cm-number">218</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-number">7</span> <span class="cm-number">11000015003011</span> &nbsp; &nbsp;<span class="cm-number">11</span> &nbsp; &nbsp; <span class="cm-number">2</span> &nbsp; &nbsp;<span class="cm-number">35</span> &nbsp; &nbsp;<span class="cm-atom">NA</span> &nbsp; &nbsp;<span class="cm-atom">NA</span> &nbsp; &nbsp;<span class="cm-atom">NA</span> &nbsp; &nbsp; <span class="cm-number">2</span> &nbsp; &nbsp; <span class="cm-number">4</span> &nbsp; &nbsp; <span class="cm-number">1</span> &nbsp; &nbsp; <span class="cm-number">5</span> &nbsp; &nbsp; <span class="cm-number">3</span> &nbsp; <span class="cm-number">218</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-number">8</span> <span class="cm-number">11000015003021</span> &nbsp; &nbsp;<span class="cm-number">11</span> &nbsp; &nbsp; <span class="cm-number">4</span> &nbsp; &nbsp;<span class="cm-number">24</span> &nbsp; &nbsp;<span class="cm-atom">NA</span> &nbsp; &nbsp;<span class="cm-atom">NA</span> &nbsp; &nbsp;<span class="cm-atom">NA</span> &nbsp; &nbsp; <span class="cm-number">2</span> &nbsp; &nbsp; <span class="cm-number">4</span> &nbsp; &nbsp; <span class="cm-number">1</span> &nbsp; &nbsp; <span class="cm-number">3</span> &nbsp; &nbsp; <span class="cm-number">3</span> &nbsp; <span class="cm-number">218</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-number">9</span> <span class="cm-number">11000015003031</span> &nbsp; &nbsp;<span class="cm-number">11</span> &nbsp; &nbsp; <span class="cm-number">2</span> &nbsp; &nbsp; <span class="cm-number">6</span> &nbsp; &nbsp;<span class="cm-atom">NA</span> &nbsp; &nbsp;<span class="cm-atom">NA</span> &nbsp; &nbsp;<span class="cm-atom">NA</span> &nbsp; &nbsp; <span class="cm-number">2</span> &nbsp; &nbsp; <span class="cm-number">4</span> &nbsp; &nbsp; <span class="cm-number">1</span> &nbsp; &nbsp; <span class="cm-number">7</span> &nbsp; &nbsp; <span class="cm-number">3</span> &nbsp; <span class="cm-number">218</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">10</span> <span class="cm-number">11000015003041</span> &nbsp; &nbsp;<span class="cm-number">11</span> &nbsp; &nbsp; <span class="cm-number">4</span> &nbsp; &nbsp; <span class="cm-number">4</span> &nbsp; &nbsp;<span class="cm-atom">NA</span> &nbsp; &nbsp;<span class="cm-atom">NA</span> &nbsp; &nbsp;<span class="cm-atom">NA</span> &nbsp; &nbsp; <span class="cm-number">2</span> &nbsp; &nbsp; <span class="cm-number">4</span> &nbsp; &nbsp; <span class="cm-number">1</span> &nbsp; &nbsp; <span class="cm-number">7</span> &nbsp; &nbsp; <span class="cm-number">3</span> &nbsp; <span class="cm-number">218</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># ... with 384,824 more rows, and 25 more variables: AUTO_DIC &lt;int&gt;, DENTISTA &lt;int&gt;, USO_DIC &lt;int&gt;,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># &nbsp; SMPC &lt;int&gt;, DENTIS_A &lt;int&gt;, PLANO_DC &lt;int&gt;, EX_MAMA &lt;int&gt;, E_SERIES &lt;int&gt;, FETAR_MU &lt;int&gt;,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># &nbsp; V1374 &lt;int&gt;, V1375 &lt;int&gt;, V1376 &lt;int&gt;, V4617 &lt;int&gt;, V4618 &lt;int&gt;, V1364 &lt;int&gt;, V1365 &lt;int&gt;,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># &nbsp; V1366 &lt;int&gt;, FETAR_AG &lt;int&gt;, V0404 &lt;int&gt;, V1361 &lt;int&gt;, V1373 &lt;int&gt;, RUR_URB &lt;int&gt;, </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># &nbsp; V4609 &lt;int&gt;, V4610 &lt;int&gt;, EST_PROJ &lt;int&gt;</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 782px;"></div><div class="CodeMirror-gutters" style="display: none; height: 782px;"></div></div></div></pre><h5><a name='header-n141' class='md-header-anchor '></a>2.3.2 Exemplo Microdado Censo 2010</h5><p>Como último exemplo vamos ler um microdado do censo fornecido em formato fixo!</p><p>veja essa <a href='http://gitlab.procc.fiocruz.br/oswaldo/DS_2017/raw/master/exemplos/amostra.dat'>amostra dos microdados</a> do censo de 2010. Como se pode ver não existe nenhum separador entre os campos e é necessário o uso de um dicionário de dados informando o tamanho de cada coluna. Esse são dados obtidos do <a href='https://www.ibge.gov.br/estatisticas-novoportal/sociais/saude/9662-censo-demografico-2010.html'>IBGE</a> para o censo de 2010, onde além de todos os microdados pode ser obtida toda a documentação.</p><p>O dicionário em geral tem esse formato</p><p><img src='dicionario.png' alt='' referrerPolicy='no-referrer' /></p><p>&nbsp;</p><p>onde podemos ver o nome de cada variável, a posição inicial, final, tamanho (parte inteira e decimal) e o tipo.  podemos ver uma pequena amostar também no <strong>R</strong> </p><p>&nbsp;</p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">read_lines</span>(<span class="cm-string">'http://gitlab.procc.fiocruz.br/oswaldo/DS_2017/raw/master/exemplos/amostra.dat'</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><p>Para ler esse dado existem várias maneiras, vamos usar o tamanho e o nome de cada uma das variáveis!</p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">tam</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">c</span>(<span class="cm-number">2</span>, <span class="cm-number">4</span>, <span class="cm-number">5</span>, <span class="cm-number">7</span>, <span class="cm-number">9</span>, <span class="cm-number">11</span>, <span class="cm-number">8</span>, <span class="cm-number">2</span>, <span class="cm-number">1</span>, <span class="cm-number">2</span>, <span class="cm-number">13</span>, <span class="cm-number">1</span>, <span class="cm-number">1</span>, <span class="cm-number">1</span>, <span class="cm-number">2</span>, <span class="cm-number">2</span>, <span class="cm-number">1</span>, <span class="cm-number">1</span>, <span class="cm-number">1</span>, </span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span>, <span class="cm-number">2</span>, <span class="cm-number">1</span>, <span class="cm-number">1</span>, <span class="cm-number">1</span>, <span class="cm-number">1</span>, <span class="cm-number">1</span>, <span class="cm-number">1</span>, <span class="cm-number">1</span>, <span class="cm-number">1</span>, <span class="cm-number">1</span>, <span class="cm-number">1</span>, <span class="cm-number">1</span>, <span class="cm-number">1</span>, <span class="cm-number">1</span>, <span class="cm-number">1</span>, <span class="cm-number">1</span>, <span class="cm-number">1</span>, <span class="cm-number">1</span>, <span class="cm-number">1</span>, <span class="cm-number">1</span>, </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span>, <span class="cm-number">1</span>, <span class="cm-number">1</span>, <span class="cm-number">1</span>, <span class="cm-number">1</span>, <span class="cm-number">1</span>, <span class="cm-number">1</span>, <span class="cm-number">1</span>, <span class="cm-number">1</span>, <span class="cm-number">1</span>, <span class="cm-number">1</span>, <span class="cm-number">1</span>, <span class="cm-number">1</span>, <span class="cm-number">1</span>, <span class="cm-number">1</span>, <span class="cm-number">1</span>, <span class="cm-number">1</span>, <span class="cm-number">1</span>, <span class="cm-number">1</span>, <span class="cm-number">1</span>, <span class="cm-number">1</span>, </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span>, <span class="cm-number">2</span>, <span class="cm-number">3</span>, <span class="cm-number">3</span>, <span class="cm-number">2</span>, <span class="cm-number">2</span>, <span class="cm-number">2</span>, <span class="cm-number">2</span>, <span class="cm-number">2</span>, <span class="cm-number">2</span>, <span class="cm-number">2</span>, <span class="cm-number">2</span>, <span class="cm-number">2</span>, <span class="cm-number">6</span>, <span class="cm-number">6</span>, <span class="cm-number">11</span>, <span class="cm-number">1</span>, <span class="cm-number">1</span>, <span class="cm-number">1</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 92px;"></div><div class="CodeMirror-gutters" style="display: none; height: 92px;"></div></div></div></pre><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">nomes</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">c</span>(<span class="cm-string">"V0102"</span>, <span class="cm-string">"V1002"</span>, <span class="cm-string">"V1003"</span>, <span class="cm-string">"V0103"</span>, <span class="cm-string">"V0104"</span>, <span class="cm-string">"V0105"</span>, <span class="cm-string">"V0300"</span>, </span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">"V0400"</span>, <span class="cm-string">"V1001"</span>, <span class="cm-string">"V1004"</span>, <span class="cm-string">"AREAP"</span>, <span class="cm-string">"V1005"</span>, <span class="cm-string">"V1006"</span>, <span class="cm-string">"V1007"</span>, </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">"V0110"</span>, <span class="cm-string">"V0111"</span>, <span class="cm-string">"V0201"</span>, <span class="cm-string">"M0201"</span>, <span class="cm-string">"V0202"</span>, <span class="cm-string">"M0202"</span>, <span class="cm-string">"V0203"</span>, </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">"M0203"</span>, <span class="cm-string">"V0204"</span>, <span class="cm-string">"M0204"</span>, <span class="cm-string">"V0205"</span>, <span class="cm-string">"M0205"</span>, <span class="cm-string">"V0206"</span>, <span class="cm-string">"M0206"</span>, </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">"V0207"</span>, <span class="cm-string">"M0207"</span>, <span class="cm-string">"V0208"</span>, <span class="cm-string">"M0208"</span>, <span class="cm-string">"V0209"</span>, <span class="cm-string">"M0209"</span>, <span class="cm-string">"V0210"</span>, </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">"M0210"</span>, <span class="cm-string">"V0211"</span>, <span class="cm-string">"M0211"</span>, <span class="cm-string">"V0212"</span>, <span class="cm-string">"M0212"</span>, <span class="cm-string">"V0213"</span>, <span class="cm-string">"M0213"</span>, </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">"V0214"</span>, <span class="cm-string">"M0214"</span>, <span class="cm-string">"V0215"</span>, <span class="cm-string">"M0215"</span>, <span class="cm-string">"V0216"</span>, <span class="cm-string">"M0216"</span>, <span class="cm-string">"V0217"</span>, </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">"M0217"</span>, <span class="cm-string">"V0218"</span>, <span class="cm-string">"M0218"</span>, <span class="cm-string">"V0219"</span>, <span class="cm-string">"M0219"</span>, <span class="cm-string">"V0220"</span>, <span class="cm-string">"M0220"</span>, </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">"V0221"</span>, <span class="cm-string">"M0221"</span>, <span class="cm-string">"V0222"</span>, <span class="cm-string">"M0222"</span>, <span class="cm-string">"V0223"</span>, <span class="cm-string">"M0223"</span>, <span class="cm-string">"V7100"</span>, </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">"V7203"</span>, <span class="cm-string">"V7204"</span>, <span class="cm-string">"V7401"</span>, <span class="cm-string">"V7402"</span>, <span class="cm-string">"V7403"</span>, <span class="cm-string">"V7404"</span>, <span class="cm-string">"V7405"</span>, </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">"V7406"</span>, <span class="cm-string">"V7407"</span>, <span class="cm-string">"V7408"</span>, <span class="cm-string">"V7409"</span>, <span class="cm-string">"V7616"</span>, <span class="cm-string">"V7617"</span>, <span class="cm-string">"P001"</span>, </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">"V1111"</span>, <span class="cm-string">"V1112"</span>, <span class="cm-string">"V1113"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 299px;"></div><div class="CodeMirror-gutters" style="display: none; height: 299px;"></div></div></div></pre><p>Note que esse dado difere um pouco do dicionário, pois ele foi obtido de uma tabulação especial antes da disponibilização dos dados no site do IBGE. </p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">onde</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-string">'http://gitlab.procc.fiocruz.br/oswaldo/DS_2017/raw/master/exemplos/dom53.zip'</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">arq</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">paste</span>(<span class="cm-variable">tempdir</span>(),<span class="cm-string">'DF.zip'</span>,<span class="cm-variable">sep</span><span class="cm-operator">=</span><span class="cm-string">'/'</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">download.file</span>(<span class="cm-variable">onde</span>,<span class="cm-variable">arq</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 92px;"></div><div class="CodeMirror-gutters" style="display: none; height: 92px;"></div></div></div></pre><p>Como já foi feito, lemos o zip através da rede e salvamos em um diretório temporário com o nome de DF.zip </p><p>Vamos finalmente importar nosso arquivo usando a função <strong>read_fwf()</strong> usando como parâmetros o tamanho (width) e o nome de cada variável, deixando a cargo da função &quot;descobrir&quot; o tipo de cada coluna.</p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">dom53</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">read_fwf</span>(<span class="cm-variable">arq</span>,<span class="cm-variable">fwf_widths</span>(<span class="cm-variable">tam</span>,<span class="cm-variable">nomes</span>))</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><p>Repare que o <em>output</em> da função retorna o formto que foi usado em cada coluna. Use as funções <strong>glimpse()</strong> e <strong>spec()</strong> para inspecionar o objeto dom53.</p><p>&nbsp;</p><p>&nbsp;</p><h4><a name='header-n163' class='md-header-anchor '></a>2.4 o pacote Tidyr</h4><p>as principais funções que veremos</p><ul><li><strong>gather()</strong> : colapsa as colunas para linhas</li><li><strong>spread()</strong> : transforma linhas em colunas</li><li><strong>separate()</strong> : separa uma coluna em múltiplas </li><li><strong>unite(</strong> ): une várias colunas em uma </li></ul><p>Vamos tomar por exemplo </p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">dados</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">as.data.frame</span>(<span class="cm-variable">state.x77</span>[<span class="cm-variable">c</span>(<span class="cm-number">3</span>,<span class="cm-number">7</span>,<span class="cm-number">9</span>,<span class="cm-number">12</span>,<span class="cm-number">34</span>),<span class="cm-number">3</span><span class="cm-operator">:</span><span class="cm-number">5</span>])</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">dados</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">Estado</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">rownames</span>(<span class="cm-variable">state.x77</span>)[<span class="cm-variable">c</span>(<span class="cm-number">3</span>,<span class="cm-number">7</span>,<span class="cm-number">9</span>,<span class="cm-number">12</span>,<span class="cm-number">34</span>)]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">dados</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">Illiteracy</span> <span class="cm-variable">Life</span> <span class="cm-variable">Exp</span> <span class="cm-variable">Murder</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">Estado</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Arizona</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">1.8</span> &nbsp; &nbsp;<span class="cm-number">70.55</span> &nbsp; &nbsp;<span class="cm-number">7.8</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">Arizona</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Connecticut</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">1.1</span> &nbsp; &nbsp;<span class="cm-number">72.48</span> &nbsp; &nbsp;<span class="cm-number">3.1</span> &nbsp;<span class="cm-variable">Connecticut</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Florida</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">1.3</span> &nbsp; &nbsp;<span class="cm-number">70.66</span> &nbsp; <span class="cm-number">10.7</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">Florida</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Idaho</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">0.6</span> &nbsp; &nbsp;<span class="cm-number">71.87</span> &nbsp; &nbsp;<span class="cm-number">5.3</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Idaho</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">North</span> <span class="cm-variable">Dakota</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0.8</span> &nbsp; &nbsp;<span class="cm-number">72.78</span> &nbsp; &nbsp;<span class="cm-number">1.4</span> <span class="cm-variable">North</span> <span class="cm-variable">Dakota</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 230px;"></div><div class="CodeMirror-gutters" style="display: none; height: 230px;"></div></div></div></pre><p>Nesse pequeno exemplo acima todas as 3 colunas são indicadores , que possuem um valor para cada estado.</p><p>&nbsp;</p><h4><a name='header-n178' class='md-header-anchor '></a>2.4.1 gather</h4><p>&nbsp;</p><p>Podemos transformar as diversas colunas contendo indicadores em duas,  uma contendo o nome e a outra o valor do indicador. para isso usaremos a função <strong>gather</strong> </p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span><span class="cm-variable">dados.curto</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">gather</span>(<span class="cm-variable">dados</span>,<span class="cm-variable">key</span><span class="cm-operator">=</span><span class="cm-string">'Indicador'</span>,<span class="cm-variable">value</span> <span class="cm-operator">=</span> <span class="cm-string">'Valor'</span>,<span class="cm-operator">-</span><span class="cm-variable">Estado</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span><span class="cm-variable">dados.curto</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Estado</span> &nbsp;<span class="cm-variable">Indicador</span> <span class="cm-variable">Valor</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> &nbsp; &nbsp; &nbsp; <span class="cm-variable">Arizona</span> <span class="cm-variable">Illiteracy</span> &nbsp;<span class="cm-number">1.80</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">2</span> &nbsp; <span class="cm-variable">Connecticut</span> <span class="cm-variable">Illiteracy</span> &nbsp;<span class="cm-number">1.10</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">3</span> &nbsp; &nbsp; &nbsp; <span class="cm-variable">Florida</span> <span class="cm-variable">Illiteracy</span> &nbsp;<span class="cm-number">1.30</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">4</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">Idaho</span> <span class="cm-variable">Illiteracy</span> &nbsp;<span class="cm-number">0.60</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">5</span> &nbsp;<span class="cm-variable">North</span> <span class="cm-variable">Dakota</span> <span class="cm-variable">Illiteracy</span> &nbsp;<span class="cm-number">0.80</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">6</span> &nbsp; &nbsp; &nbsp; <span class="cm-variable">Arizona</span> &nbsp; <span class="cm-variable">Life</span> <span class="cm-variable">Exp</span> <span class="cm-number">70.55</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">7</span> &nbsp; <span class="cm-variable">Connecticut</span> &nbsp; <span class="cm-variable">Life</span> <span class="cm-variable">Exp</span> <span class="cm-number">72.48</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">8</span> &nbsp; &nbsp; &nbsp; <span class="cm-variable">Florida</span> &nbsp; <span class="cm-variable">Life</span> <span class="cm-variable">Exp</span> <span class="cm-number">70.66</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">9</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">Idaho</span> &nbsp; <span class="cm-variable">Life</span> <span class="cm-variable">Exp</span> <span class="cm-number">71.87</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">10</span> <span class="cm-variable">North</span> <span class="cm-variable">Dakota</span> &nbsp; <span class="cm-variable">Life</span> <span class="cm-variable">Exp</span> <span class="cm-number">72.78</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">11</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">Arizona</span> &nbsp; &nbsp; <span class="cm-variable">Murder</span> &nbsp;<span class="cm-number">7.80</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">12</span> &nbsp;<span class="cm-variable">Connecticut</span> &nbsp; &nbsp; <span class="cm-variable">Murder</span> &nbsp;<span class="cm-number">3.10</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">13</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">Florida</span> &nbsp; &nbsp; <span class="cm-variable">Murder</span> <span class="cm-number">10.70</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">14</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Idaho</span> &nbsp; &nbsp; <span class="cm-variable">Murder</span> &nbsp;<span class="cm-number">5.30</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-number">15</span> <span class="cm-variable">North</span> <span class="cm-variable">Dakota</span> &nbsp; &nbsp; <span class="cm-variable">Murder</span> &nbsp;<span class="cm-number">1.40</span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 414px;"></div><div class="CodeMirror-gutters" style="display: none; height: 414px;"></div></div></div></pre><p>Observe que todas as colunas menos o nome do estado foram colapsadas em duas variáveis, uma com o nome e outra com o valor de cada indicador.</p><p>Esse formato acima é o mais indicado para banco de dados e permite filtrar mais rapidamente, por exemplo, um indicador que você deseja. Esse também é o formato que a <strong>ggplot</strong> gosta que os dados estejam!</p><p>&nbsp;</p><p>&nbsp;</p><h4><a name='header-n186' class='md-header-anchor '></a>2.4.2 spread</h4><p>Em algumas situações, por exemplo, fazer um modelo <strong>GLM</strong> é mais cômodo que os dados esteja em colunas distintas. A seguir podemos ver como retornar ao formato original</p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&gt; spread(dados.curto,Indicador,Valor)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; state Illiteracy Life Exp Murder</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">1 &nbsp; &nbsp;  Arizona &nbsp; &nbsp; &nbsp;  1.8 &nbsp;  70.55 &nbsp;  7.8</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">2  Connecticut &nbsp; &nbsp; &nbsp;  1.1 &nbsp;  72.48 &nbsp;  3.1</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">3 &nbsp; &nbsp;  Florida &nbsp; &nbsp; &nbsp;  1.3 &nbsp;  70.66 &nbsp; 10.7</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">4 &nbsp; &nbsp; &nbsp;  Idaho &nbsp; &nbsp; &nbsp;  0.6 &nbsp;  71.87 &nbsp;  5.3</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">5 North Dakota &nbsp; &nbsp; &nbsp;  0.8 &nbsp;  72.78 &nbsp;  1.4</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 161px;"></div><div class="CodeMirror-gutters" style="display: none; height: 161px;"></div></div></div></pre><p>&nbsp;</p><h4><a name='header-n190' class='md-header-anchor '></a>2.4.3  Unite</h4><p>A função a seguir <strong>unite</strong> permite unir colunas usando um separador </p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="" contenteditable="false" cid="n192" mdtype="fences">&gt;dados.junto &lt;- unite(dados,'Analf_Homic',Illiteracy,Murder,sep='/')
&gt;dados.junto

             Analf_Homic Life Exp        state
Arizona          1.8/7.8    70.55      Arizona
Connecticut      1.1/3.1    72.48  Connecticut
Florida         1.3/10.7    70.66      Florida
Idaho            0.6/5.3    71.87        Idaho
North Dakota     0.8/1.4    72.78 North Dakota
</pre><p>no exemplo acima criamos uma variável Analf_Homic onde os valores são separador por /  (o default é separar por _)</p><p>&nbsp;</p><h4><a name='header-n195' class='md-header-anchor '></a>2.4.4 Separate</h4><p>e se quisermos separar novamente esse banco? do formato acima? Usaremos a função <strong>separate</strong> </p><p>&nbsp;</p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="" contenteditable="false" cid="n198" mdtype="fences"> &gt;separate(dados.junto,'Analf_Homic',c('Analf','Homic'),sep='/')
             Analf Homic Life Exp        state
Arizona        1.8   7.8    70.55      Arizona
Connecticut    1.1   3.1    72.48  Connecticut
Florida        1.3  10.7    70.66      Florida
Idaho          0.6   5.3    71.87        Idaho
North Dakota   0.8   1.4    72.78 North Dakota
</pre><p>&nbsp;</p><h4><a name='header-n200' class='md-header-anchor '></a>2.4.5 Exercícios tidyr</h4><p>Vamos fazer um par de exercícios para fixar. </p><ul><li>A) Importe diretamente no <strong>R</strong> a tabela no endereço </li></ul><p>&#39;<a href='http://gitlab.procc.fiocruz.br/oswaldo/DS_2017/raw/master/exemplos/Tabela_Sidra_200.csv' target='_blank' class='url'>http://gitlab.procc.fiocruz.br/oswaldo/DS_2017/raw/master/exemplos/Tabela_Sidra_200.csv</a>&#39;</p><p>Leia os dados , e chame a tabela de tab200. Depois de normalizar o nome das colunas crie uma nova tabela que deve ter somente as seguintes colunas: o nome da UF, o no do censo, o sexo, a faixa etária e o total da população.</p><p>Como dica fica aqui um pedaço de função em REGEX para ajudar na limpeza </p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="" contenteditable="false" cid="n208" mdtype="fences">	gsub('(^[M|H])\\.([0-9]{4})\\.','\\1-\\2-FX_',name(tab200))
</pre><ul><li>B) leia as tabelas abaixo </li></ul><p><a href='http://gitlab.procc.fiocruz.br/oswaldo/DS_2017/raw/master/exemplos/infarto_homens.csv' target='_blank' class='url'>http://gitlab.procc.fiocruz.br/oswaldo/DS_2017/raw/master/exemplos/infarto_homens.csv</a>
<a href='http://gitlab.procc.fiocruz.br/oswaldo/DS_2017/raw/master/exemplos/infarto_mulheres.csv' target='_blank' class='url'>http://gitlab.procc.fiocruz.br/oswaldo/DS_2017/raw/master/exemplos/infarto_mulheres.csv</a></p><ol start='' ><li>Crie uma variável sexo , e junte as tabelas </li><li>Separe o código do nome da UF</li><li>Crie uma tabela que tenha CODUF, UF, ANO, SEXO, OBITOS</li></ol><h4><a name='header-n222' class='md-header-anchor '></a>2.5 o pacote dplyr</h4><p>O pacote  <strong>dplyr</strong> é um poderoso conjunto de funções para filtrar, transformar, ordenar,  sumarizar, etc...   dados tabulares  no <strong>R</strong>.  Faz parte do <strong>tidyverse</strong> e sua vignette pode ser encontrada  <a href='http://cran.rstudio.com/web/packages/dplyr/vignettes/introduction.html'>AQUI</a></p><p>Apesar de muitas funções para já existirem no <strong>R</strong> base , faltava a elas consistências nos parâmetros e na funcionalidade do código.  Isso levou  Hadley Wickham a desenvolver um primeiro pacote chamado <em>plyr</em> que implementava a transformação e manipulação de  vários tipo de estruturas de dados presentes no <strong>R</strong> (data.frames, listas, arrays). O <em>dplyr</em> criado posteriormente focou mais na manipulação de <em>data.frames</em> é claro <em>tribbles</em>  usando também nomes de funções mais fáceis de se memorizar e que deixem mais clara o que a função realiza.  O <em>dplyr</em> também faz uso do operador <em>%&gt;%</em>  e possuem funções para:</p><ul><li>selecionar variáveis</li><li>filtrar dados </li><li>criação e alteração de variáveis</li><li>ordenar</li><li>relacionar (JOIN) novos dados</li><li>sumarizar dados</li><li>agrupar por categorias</li></ul><p>Vamos apresentar cada uma dessas funcionalidades do pacote <em>dplyr</em> usando os exemplos de dados que vimos até agora durante o curso.  </p><h5><a name='header-n241' class='md-header-anchor '></a>2.5.1 Select </h5><p>A função <strong>select()</strong> seleciona as colunas com os respectivos nomes e também especifica sua ordem de saída.  </p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">names</span>(<span class="cm-variable">mtcars</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> [<span class="cm-number">1</span>] <span class="cm-string">"mpg"</span> &nbsp;<span class="cm-string">"cyl"</span> &nbsp;<span class="cm-string">"disp"</span> <span class="cm-string">"hp"</span> &nbsp; <span class="cm-string">"drat"</span> <span class="cm-string">"wt"</span> &nbsp; <span class="cm-string">"qsec"</span> <span class="cm-string">"vs"</span> &nbsp; <span class="cm-string">"am"</span> &nbsp; <span class="cm-string">"gear"</span> <span class="cm-string">"carb"</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><p>Assim se quisermos apenas as colunas wt,hp e cyl (nessa ordem)</p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">mtcars</span> <span class="cm-operator cm-variable-2">%&gt;%</span> <span class="cm-variable">select</span> (<span class="cm-variable">wt</span>,<span class="cm-variable">hp</span>,<span class="cm-variable">cyl</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><p>o traço de menos pode ser usado para remover uma ou mais variáveis </p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mtcars</span> <span class="cm-operator cm-variable-2">%&gt;%</span> <span class="cm-variable">select</span> (<span class="cm-operator">-</span><span class="cm-variable">mpg</span>,<span class="cm-operator">-</span><span class="cm-variable">disp</span>,<span class="cm-operator">-</span><span class="cm-variable">drat</span>,<span class="cm-operator">-</span><span class="cm-variable">qsec</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><p>também se pode especificar um intervalos</p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">mtcars</span> <span class="cm-operator cm-variable-2">%&gt;%</span> <span class="cm-variable">select</span> (<span class="cm-variable">vs</span><span class="cm-operator">:</span><span class="cm-variable">carb</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment"># Ou negar um intervalo</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">mtcars</span> <span class="cm-operator cm-variable-2">%&gt;%</span> <span class="cm-variable">select</span> (<span class="cm-operator">-</span><span class="cm-variable">vs</span><span class="cm-operator">:-</span><span class="cm-variable">carb</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 69px;"></div><div class="CodeMirror-gutters" style="display: none; height: 69px;"></div></div></div></pre><p>note que ainda se pode usar a posição da coluna do nome</p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">mtcars</span> <span class="cm-operator cm-variable-2">%&gt;%</span> <span class="cm-variable">select</span> (<span class="cm-variable">c</span>(<span class="cm-number">1</span>,<span class="cm-number">3</span>,<span class="cm-number">5</span>))</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><p>Outras maneiras mais avançadas de usar a função select se utilizam de funções auxiliares. 
Para demostrar essas funções vamos usar o exemplo da tabela 200 do Sidra.</p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">sidra</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">read_csv2</span>(<span class="cm-string">'http://gitlab.procc.fiocruz.br/oswaldo/DS_2017/raw/master/exemplos/Tabela_Sidra_200.csv'</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 69px;"></div><div class="CodeMirror-gutters" style="display: none; height: 69px;"></div></div></div></pre><p>as funções auxiliares <strong>starts_with()</strong> e <strong>ends_with()</strong>  permitem selecionar padrões de inicio e fim para o nome das colunas por exemplo:</p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">sidra</span> &nbsp;<span class="cm-operator cm-variable-2">%&gt;%</span> <span class="cm-variable">select</span>( <span class="cm-variable">UF</span>,<span class="cm-variable">starts_with</span>(<span class="cm-string">'H-2010'</span>) )</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">sidra</span> &nbsp;<span class="cm-operator cm-variable-2">%&gt;%</span> <span class="cm-variable">select</span>( <span class="cm-variable">UF</span>,<span class="cm-variable">ends_with</span>(<span class="cm-string">'Total'</span>) )</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><p>&nbsp;</p><p>as funções <strong>contains()</strong> e <strong>matches()</strong> permitem selecionar padrões dentro do nome das colunas</p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">sidra</span> &nbsp;<span class="cm-operator cm-variable-2">%&gt;%</span> <span class="cm-variable">select</span>( <span class="cm-variable">UF</span>,<span class="cm-variable">contains</span>(<span class="cm-string">'2010'</span>) )</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">sidra</span> &nbsp;<span class="cm-operator cm-variable-2">%&gt;%</span> <span class="cm-variable">select</span>( <span class="cm-variable">UF</span>,<span class="cm-variable">matches</span>(<span class="cm-string">'.9[0-9].'</span>) )</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><p>e por fim todos os padrões podem ser negados usando &#39;-&#39; </p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">sidra</span> &nbsp;<span class="cm-operator cm-variable-2">%&gt;%</span> <span class="cm-variable">select</span>( &nbsp;<span class="cm-operator">-</span><span class="cm-variable">starts_with</span>(<span class="cm-string">'H-'</span>))</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">sidra</span> &nbsp;<span class="cm-operator cm-variable-2">%&gt;%</span> <span class="cm-variable">select</span>( <span class="cm-variable">UF</span>,<span class="cm-operator">-</span><span class="cm-variable">contains</span>(<span class="cm-string">'Total'</span>) )</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><h5><a name='header-n261' class='md-header-anchor '></a>2.5.2 Filtro </h5><p>A função <strong>filter()</strong> é a responsável por selecionar os registros (linhas) que atendem o critério seu uso é bastante intuitivo:</p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mtcars</span> <span class="cm-operator cm-variable-2">%&gt;%</span> <span class="cm-variable">filter</span>(<span class="cm-variable">cyl</span> <span class="cm-operator">==</span> <span class="cm-number">4</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><p>o comando acima seleciona os carros do exemplo <em>mtcars</em> que possuem exatamente 4 cilindros.</p><p>se quiser selecionar os que possuem 6 cilindros e apenas 1 carburador </p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">mtcars</span> <span class="cm-operator cm-variable-2">%&gt;%</span> <span class="cm-variable">filter</span>(<span class="cm-variable">cyl</span> <span class="cm-operator">==</span> <span class="cm-number">6</span> <span class="cm-operator">&amp;</span> <span class="cm-variable">carb</span> <span class="cm-operator">==</span> <span class="cm-number">1</span> )</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment"># OU</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">mtcars</span> <span class="cm-operator cm-variable-2">%&gt;%</span> <span class="cm-variable">filter</span>(<span class="cm-variable">cyl</span> <span class="cm-operator">==</span> <span class="cm-number">6</span> , <span class="cm-variable">carb</span> <span class="cm-operator">==</span><span class="cm-number">1</span>) <span class="cm-comment"># a virgula funciona com  AND</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 69px;"></div><div class="CodeMirror-gutters" style="display: none; height: 69px;"></div></div></div></pre><p>Repare que múltiplos critérios são equivalentes ao operador <em>AND</em> (&amp;)</p><p>Vamos então utilizar o operador <em>OU</em> (|) para selecionar carros com mais de 200 hp e mais de 4 marchas. </p><p>lembrando os operadores lógicos:</p><figure><table><thead><tr><th>Operador Logico</th><th style='text-align:center;' ><strong>R</strong></th><th style='text-align:center;' >Significado</th></tr></thead><tbody><tr><td>EQUAL</td><td style='text-align:center;' >==</td><td style='text-align:center;' >IGUAL</td></tr><tr><td>AND</td><td style='text-align:center;' >&amp;</td><td style='text-align:center;' >E</td></tr><tr><td>OR</td><td style='text-align:center;' >|</td><td style='text-align:center;' >OU</td></tr><tr><td>XOR</td><td style='text-align:center;' >xor()</td><td style='text-align:center;' >OU EXCLUSIVO</td></tr><tr><td>NOT</td><td style='text-align:center;' >!</td><td style='text-align:center;' >NÃO</td></tr></tbody></table></figure><p>&nbsp;</p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">mtcars</span> <span class="cm-operator cm-variable-2">%&gt;%</span> <span class="cm-variable">filter</span>(<span class="cm-variable">hp</span> <span class="cm-operator">&gt;</span> <span class="cm-number">200</span> <span class="cm-operator">|</span> <span class="cm-variable">gear</span> &nbsp;<span class="cm-operator">&lt;</span> <span class="cm-number">4</span> )</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><p>e muitas vezes é útil combinar o <strong>filter()</strong> com o <strong>select()</strong></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">sidra</span> <span class="cm-operator cm-variable-2">%&gt;%</span> &nbsp;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">select</span>( <span class="cm-variable">UF</span>,<span class="cm-variable">contains</span>(<span class="cm-string">'Total'</span>) ) <span class="cm-operator cm-variable-2">%&gt;%</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">filter</span>( <span class="cm-variable">UF</span> <span class="cm-operator cm-variable-2">%in%</span> <span class="cm-variable">c</span>(<span class="cm-string">'Rio de Janeiro'</span>,<span class="cm-string">'São Paulo'</span>,<span class="cm-string">'Espírito Santo'</span>,<span class="cm-string">'Minas Gerais'</span>) )</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 69px;"></div><div class="CodeMirror-gutters" style="display: none; height: 69px;"></div></div></div></pre><p>OBS: o operado <strong>%in%</strong> retorna <strong>TRUE</strong> para as categorias presentes em ambos os lados do operador.</p><p>&nbsp;</p><h5><a name='header-n302' class='md-header-anchor '></a>Exercícios 2.5.1 Tente responder essas questões:</h5><ul><li>quantos carros teriam mais de 150 hp e igual ou maior de  4 marchas (gears) ?</li><li>quantos carros teríamos com critério acima e  ter também 2 carburadores?</li><li>quais são as UF que tem mais de 5000 mulheres de mais de 90 anos em 2010 na tabela do Sidra</li><li>retorne somente as faixas etárias entre 20 e 40 anos para a tabela Sidra</li><li>deixe o nome das variáveis mais &quot;limpo&quot; removendo a palavra &#39;anos&#39; e substituindo mais por &#39;+&#39;.</li></ul><p>clique <a href='exec-251.html'>AQUI para as Respostas</a></p><h5><a name='header-n316' class='md-header-anchor '></a>2.5.3 Criação e Alteração </h5><p>&nbsp;</p><p>a função <strong>mutate()</strong> permite a modificação dos nossa tabela de dados, criando ou modificando variáveis já existentes. </p><p>veja no exemplo abaixo que  temos duas variáveis , Wind que está em Milhas por hora e Temp em graus Fahrenheit. vamos transforma-las em Km/h e graus Celsius  usando a função <strong>mutate()</strong> </p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">airquality</span> <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">mutate</span> (<span class="cm-variable">Wind</span> <span class="cm-operator">=</span> <span class="cm-variable">Wind</span> <span class="cm-operator">*</span> <span class="cm-number">1.609</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Temp</span> <span class="cm-operator">=</span> <span class="cm-variable">round</span>((<span class="cm-variable">Temp</span> <span class="cm-operator">-</span> <span class="cm-number">32</span>) <span class="cm-operator">*</span> <span class="cm-number">5</span> <span class="cm-operator">/</span> <span class="cm-number">9</span>, <span class="cm-number">2</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  )</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 115px;"></div><div class="CodeMirror-gutters" style="display: none; height: 115px;"></div></div></div></pre><p>&nbsp;</p><p>alem de mudar variáveis já existentes também é possível criar novas. veja  o exemplo a seguir:</p><p>o dataset <em>msleep</em> tem dados sobre o sono de algumas especies e suponha que queremos criar uma nova variável com a percentual entre sono do tipo REM sobre o total </p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">sono</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">msleep</span> <span class="cm-operator cm-variable-2">%&gt;%</span> &nbsp;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">select</span>(<span class="cm-variable">name</span>,<span class="cm-variable">sleep_total</span> ,<span class="cm-variable">sleep_rem</span>) <span class="cm-operator cm-variable-2">%&gt;%</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">mutate</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">rem_pct</span> <span class="cm-arg-is">=</span> (<span class="cm-variable">sleep_rem</span> <span class="cm-operator">/</span> <span class="cm-variable">sleep_total</span>)<span class="cm-operator">*</span><span class="cm-number">100</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-tab" role="presentation" cm-text="	">   </span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 138px;"></div><div class="CodeMirror-gutters" style="display: none; height: 138px;"></div></div></div></pre><p>Pode-se também combinar modificações e criações de variáveis</p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mtcars</span> <span class="cm-operator cm-variable-2">%&gt;%</span> <span class="cm-variable">as_tibble</span>() <span class="cm-operator cm-variable-2">%&gt;%</span> <span class="cm-variable">mutate</span>(</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">kpl</span> <span class="cm-arg-is">=</span> (<span class="cm-variable">mpg</span> <span class="cm-operator">/</span><span class="cm-number">3.78541</span>) <span class="cm-operator">*</span><span class="cm-number">1.6</span> ,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">disp</span> <span class="cm-arg-is">=</span> <span class="cm-variable">disp</span> <span class="cm-operator">*</span> <span class="cm-number">0.0163871</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">wt</span> <span class="cm-arg-is">=</span> (<span class="cm-variable">wt</span> <span class="cm-operator">*</span> <span class="cm-number">0.45352</span>)<span class="cm-operator">*</span><span class="cm-number">1000</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">am</span> <span class="cm-arg-is">=</span> <span class="cm-variable">factor</span>(<span class="cm-variable">am</span>,<span class="cm-variable">label</span><span class="cm-operator">=</span><span class="cm-variable">c</span>(<span class="cm-string">'Manual'</span>,<span class="cm-string">'Automatico'</span>)),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">name</span> <span class="cm-arg-is">=</span> <span class="cm-variable">rownames</span>(<span class="cm-variable">mtcars</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">mpg</span> <span class="cm-arg-is">=</span> <span class="cm-atom">NULL</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 184px;"></div><div class="CodeMirror-gutters" style="display: none; height: 184px;"></div></div></div></pre><p>No exemplo acima  estamos alterando e  criando novas variáveis:</p><ul><li>kpl (kilometros por hora ao invés de milhas por galão) [<strong>NOVA</strong>]</li><li>deslocamento (disp) transformado de polegadas cubicas para cm cúbicos [<strong>TRANSFORMADA</strong>]</li><li>peso (wt) transformado  de libras/1000 para Kg [<strong>TRANSFORMADA</strong>]</li><li>am (tipo de transmissão) transformada em fator [<strong>TRANSFORMADA</strong>]</li><li>name (nome do automóvel) [<strong>NOVA</strong>]</li><li>ao atribuir um valor <strong>NULL</strong> a mpg faz com que essa variável seja excluída! [<strong>REMOVIDA</strong>]</li></ul><p>&nbsp;</p><h5><a name='header-n344' class='md-header-anchor '></a>2.5.4  Ordenação</h5><p>A função <strong>arrange()</strong> altera a ordem que os registros (linhas)  são armazenados (ou exibidas).  </p><p>Essa função é muito simples vamos ordenar pelo valor de <em>rem_pct</em> no objeto <em>sono</em> criado no exemplo anterior. </p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="" contenteditable="false" cid="n347" mdtype="fences">sono %&gt;% arrange(rem_pct) 
</pre><p>Podemos ver que a baleia piloto e a que menos sono REM tem, e se quisermos saber as 5 espécies que mais sono REM tem? Para inverter o sentido da ordenação usamos a função <strong>desc()</strong> .</p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="" contenteditable="false" cid="n349" mdtype="fences">sono %&gt;% arrange(desc(rem_pct)) %&gt;% head(5)
</pre><p>&nbsp;</p><h5><a name='header-n351' class='md-header-anchor '></a>2.5.6 Join </h5><p>uma das tarefas que necessitamos com frequência ao gerenciamos um dado e a possibilidade de unir dados. </p><p>o <em>tidyverse</em> possui em seu pacote <em>dplyr</em> diversas funções para fazer a união de <em>data.frames</em> ou <em>tibbles</em> </p><p> são elas:</p><p> </p><figure><table><thead><tr><th><strong>Função</strong></th><th>Descrição</th><th>Imagem</th></tr></thead><tbody><tr><td><strong>inner_join(X,Y)</strong></td><td>retorna todas as linhas em <strong>X</strong>  que tem correspondência em <strong>Y</strong>,  caso haja mais de uma correspondência todas as combinações são retornadas.</td><td><img src='inner_join.png' alt='' referrerPolicy='no-referrer' /></td></tr><tr><td><strong>left_join(X,Y)</strong></td><td>retorna toda a tabela <strong>X</strong> e mais as colunas da tabela <strong>Y</strong> que tem correspondência em <strong>X</strong> . caso haja mais de uma correspondência todas as combinações são retornadas</td><td><img src='left_join.png' alt='' referrerPolicy='no-referrer' /></td></tr><tr><td><strong>anti_join(X,Y)</strong></td><td>retorna todas as linhas de <strong>X</strong> que <strong>NÃO</strong> tem correspondência em <strong>Y</strong></td><td><img src='anti_join.png' alt='' referrerPolicy='no-referrer' /></td></tr><tr><td><strong>full_join(X,Y)</strong></td><td>retorna todas as linhas de <strong>X</strong> e de <strong>Y</strong> as que não tem correspondência recebem  <strong><em>NA</em></strong></td><td><img src='full_join.png' alt='' referrerPolicy='no-referrer' /></td></tr><tr><td><strong>semi_join(X,Y)</strong></td><td>retorna somente as linhas de <strong>X</strong>  onde existem correspondente em  <strong>Y</strong>, não duplica o numero de linhas de <strong>X</strong></td><td><img src='semi_join.png' alt='' referrerPolicy='no-referrer' /></td></tr><tr><td><strong>right_join(X,Y)</strong></td><td>retorna somente as linhas de <strong>Y</strong>  e mais correspondente em  <strong>A</strong></td><td><img src='right_join.png' alt='' referrerPolicy='no-referrer' /></td></tr></tbody></table></figure><p>&nbsp;</p><p>Vamos criar algumas estruturas de dados para que possamos ilustrar esses exemplos.</p><p>&nbsp;</p><p>A primeira para <em>alunos</em>  </p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">tidyverse</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">alunos</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">tribble</span> (</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-operator">~</span><span class="cm-variable">MAT</span>, <span class="cm-operator">~</span><span class="cm-variable">TURMA</span>,<span class="cm-operator">~</span><span class="cm-variable">CURSO</span>,<span class="cm-operator">~</span><span class="cm-variable">NOME</span>, <span class="cm-operator">~</span><span class="cm-variable">SEXO</span>, <span class="cm-operator">~</span><span class="cm-variable">DT_NASC</span>, &nbsp;<span class="cm-operator">~</span><span class="cm-variable">END</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">"30211"</span>,<span class="cm-string">"01/2017"</span>, <span class="cm-string">"MSC"</span>, <span class="cm-string">"Luiz Correia Cunha"</span>, <span class="cm-string">"M"</span>,<span class="cm-string">"11/12/1979"</span>,<span class="cm-string">"Rua Solimões, 1406 - Goiania/GO"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">"30432"</span>,<span class="cm-string">"01/2017"</span>, <span class="cm-string">"MSC"</span>, <span class="cm-string">"Maria Ribeiro Silva"</span>,<span class="cm-string">"F"</span>,<span class="cm-string">"29/10/1983"</span>,<span class="cm-string">"Super Quadra 301 Conjunto 02, 601 - BSB/DF"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">"20345"</span>,<span class="cm-string">"02/2016"</span>, <span class="cm-string">"PHD"</span>, <span class="cm-string">"Otávio José Rocha"</span>,<span class="cm-string">"M"</span>,<span class="cm-string">"26/06/1989"</span>,<span class="cm-string">"Rua Treze, 179 - Caraguatatuba/SP"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">"30131"</span>,<span class="cm-string">"01/2016"</span>, <span class="cm-string">"MSC"</span>, <span class="cm-string">"Alice Oliveira Araujo"</span>,<span class="cm-string">"F"</span>, <span class="cm-string">"20/04/1987"</span>,<span class="cm-string">"Rua Curuçá, 309 - Rio de Janeiro/RJ"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">"30225"</span>,<span class="cm-string">"01/2017"</span>, <span class="cm-string">"MSC"</span>, <span class="cm-string">"Giovanna Cavalcanti Oliveira"</span>, <span class="cm-string">"F"</span> , <span class="cm-string">"14/01/1988"</span>, <span class="cm-string">"Rua José da Silva, 47 - Arapiraca/AL"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">"20456"</span>,<span class="cm-string">"01/2015"</span>, <span class="cm-string">"PHD"</span>, <span class="cm-string">"Vinícius Pereira Dias"</span>,<span class="cm-string">"M"</span>,<span class="cm-string">"29/06/1980"</span>,<span class="cm-string">"Rua Jack Fadel, 1308 - Curitiba/PR"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">"20765"</span>,<span class="cm-string">"02/2015"</span>, <span class="cm-string">"PHD"</span>, <span class="cm-string">"Maria Melo Souza"</span>,<span class="cm-string">"F"</span>,<span class="cm-string">"10/10/1974"</span>,<span class="cm-string">"Rua São Gonçalo, 752 - Itaguaí/RJ"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">"30543"</span>,<span class="cm-string">"01/2017"</span>, <span class="cm-string">"PHD"</span>, <span class="cm-string">"Gabriela Carvalho Costa"</span>,<span class="cm-string">"F"</span>,<span class="cm-string">"20/09/1976"</span>,<span class="cm-string">"Largo da Penha, 78 - Rio de Janeiro/RJ"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">"30156"</span>,<span class="cm-string">"02/2016"</span>, <span class="cm-string">"MSC"</span>, <span class="cm-string">"Kauan Pinto Araujo"</span>,<span class="cm-string">"M"</span>,<span class="cm-string">"12/02/1981"</span>,<span class="cm-string">"Alameda Batatais, 1343 - Rio de Janeiro/RJ"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">"30082"</span>,<span class="cm-string">"01/2016"</span>, <span class="cm-string">"MSC"</span>, <span class="cm-string">"Rebeca Barbosa Ferreira"</span>,<span class="cm-string">"F"</span>, <span class="cm-string">"22/12/1990"</span>,<span class="cm-string">"Rua Paulino Giorgis, 1161 - Bagé/RS"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">"30567"</span>,<span class="cm-string">"01/2017"</span>, <span class="cm-string">"MSC"</span>, <span class="cm-string">"Alonso Mariano da Costa"</span>, <span class="cm-string">"M"</span>, <span class="cm-string">"17/08/1992"</span>, <span class="cm-string">"Rua Marques de Olinda, 786, Rio de Janeiro/RJ"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">) </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 598px;"></div><div class="CodeMirror-gutters" style="display: none; height: 598px;"></div></div></div></pre><p>A tabela seguinte será <em>disciplinas</em> </p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">disciplinas</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">tribble</span>(</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-operator">~</span><span class="cm-variable">DISCIPLINA</span>, <span class="cm-operator">~</span><span class="cm-variable">CODIS</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">"Curso Básico de R"</span>,<span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-string">"ENSP.82.121.2"</span><span class="cm-tab" role="presentation" cm-text="	"> </span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-string">"Dinâmica Socioambiental e Doenças Transmissíveis"</span>,<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-string">"ENSP.85.100.1"</span>,<span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">"Epidemiologia - Conceitos e Métodos I"</span><span class="cm-tab" role="presentation" cm-text="	"> </span>,<span class="cm-string">"ENSP.81.100.1"</span><span class="cm-tab" role="presentation" cm-text="	">    </span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">"Epistemologia, História e Filosofia da Ciência"</span>,<span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-string">"ENSP.80.113.1"</span>, </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-string">"Estatística Aplicada à Epidemiologia"</span>,<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-string">"ENSP.82.104.2"</span> ,<span class="cm-tab" role="presentation" cm-text="	">   </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-string">"Matemática Aplicada I"</span><span class="cm-tab" role="presentation" cm-text="	"> </span>, <span class="cm-string">"ENSP.82.100.1"</span> , <span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-string">"Seminários Avançados de Doutorado I"</span> , <span class="cm-string">"ENSP.80.104.1"</span>,<span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">"Tópicos em Saúde Pública"</span><span class="cm-tab" role="presentation" cm-text="	">  </span>, <span class="cm-string">"ENSP.80.103.1"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-string">"Epidemiologia - Conceitos e Métodos II"</span>,<span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-string">"ENSP.81.101.1"</span>,<span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-string">"Introdução a Data Science Aplicada à Epidemiologia"</span>,<span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-string">"ENSP.82.137.1"</span>,<span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-string">"Modelos Estatísticos I"</span>,<span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-string">"ENSP.82.105.2"</span>,<span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-string">"Modelos Estatísticos II"</span>,<span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-string">"ENSP.82.107.2"</span>,<span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-string">"Seminários Avançados de Doutorado"</span>,<span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-string">"ENSP.80.119.1"</span>,<span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">"Seminários Avançados de Mestrado"</span>,<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-string">"ENSP.80.122.1"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 414px;"></div><div class="CodeMirror-gutters" style="display: none; height: 414px;"></div></div></div></pre><p>e por fim a tabela <em>notas</em> </p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">notas</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">tribble</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-operator">~</span><span class="cm-variable">CODIS</span>,<span class="cm-operator">~</span><span class="cm-variable">MAT</span>,<span class="cm-operator">~</span><span class="cm-variable">NOTA</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">"ENSP.82.105.2"</span>, <span class="cm-string">"30211"</span> , <span class="cm-string">"A"</span> ,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">"ENSP.82.105.2"</span>, <span class="cm-string">"30432"</span> , <span class="cm-string">"A"</span> ,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">"ENSP.82.105.2"</span>, <span class="cm-string">"30131"</span> , <span class="cm-string">"C"</span> ,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">"ENSP.82.105.2"</span>, <span class="cm-string">"30225"</span> , <span class="cm-string">"B"</span> ,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">"ENSP.82.105.2"</span>, <span class="cm-string">"30543"</span> , <span class="cm-string">"A"</span> ,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">"ENSP.80.119.1"</span>, <span class="cm-string">"20345"</span> , <span class="cm-string">"B"</span> , </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">"ENSP.80.119.1"</span>, <span class="cm-string">"20456"</span> , <span class="cm-string">"B"</span> ,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">"ENSP.80.119.1"</span>, <span class="cm-string">"30543"</span> , <span class="cm-string">"A"</span> ,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">"ENSP.82.107.2"</span>, <span class="cm-string">"30156"</span> , <span class="cm-string">"A"</span> , </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">"ENSP.82.107.2"</span>, <span class="cm-string">"30082"</span> , <span class="cm-string">"A"</span> ,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">"ENSP.82.107.2"</span>, <span class="cm-string">"30131"</span> , <span class="cm-string">"B"</span> ,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">"ENSP.80.122.1"</span>, <span class="cm-string">"30131"</span> , <span class="cm-string">"A"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">"ENSP.80.122.1"</span>, <span class="cm-string">"30211"</span> , <span class="cm-string">"C"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">"ENSP.80.122.1"</span>, <span class="cm-string">"30432"</span> , <span class="cm-string">"B"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">"ENSP.82.137.1"</span>, <span class="cm-string">"30543"</span> , <span class="cm-string">"A"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">"ENSP.82.121.2"</span>, <span class="cm-string">"30432"</span> , <span class="cm-string">"A"</span>, </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">"ENSP.85.100.1"</span>, <span class="cm-string">"30543"</span> , <span class="cm-string">"B"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">"ENSP.82.121.2"</span>, <span class="cm-string">"30131"</span> , <span class="cm-string">"C"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">"ENSP.82.121.2"</span>, <span class="cm-string">"30225"</span> , <span class="cm-string">"A"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">"ENSP.82.121.2"</span>, <span class="cm-string">"20456"</span> , <span class="cm-string">"B"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">"ENSP.82.121.2"</span>, <span class="cm-string">"30156"</span> , <span class="cm-string">"D"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">"ENSP.82.121.2"</span>,<span class="cm-string">"30211"</span>, <span class="cm-string">"B"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 644px;"></div><div class="CodeMirror-gutters" style="display: none; height: 644px;"></div></div></div></pre><p>Crie as 3 tabelas, inspecione para ver se todas foram criadas corretamente. Agora vamos fazer algumas relacionamentos com elas.</p><p>vamos fazer uma join entre as tabelas , por exemplo </p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">alunos</span> <span class="cm-operator cm-variable-2">%&gt;%</span> <span class="cm-variable">left_join</span>(<span class="cm-variable">notas</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><p>repare que não foi preciso dizer qual o campo de ligação (<em>by</em> ) , mas caso necessário poderíamos fazer </p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">alunos</span> <span class="cm-operator cm-variable-2">%&gt;%</span> <span class="cm-variable">left_join</span>(<span class="cm-variable">notas</span>,<span class="cm-variable">by</span><span class="cm-operator">=</span><span class="cm-string">"MAT"</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><p>note também que apenas as 10 primeiras linhas são mostradas, esse é o <em>default</em> do dplyr </p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">alunos</span> <span class="cm-operator cm-variable-2">%&gt;%</span> <span class="cm-variable">left_join</span>(<span class="cm-variable">notas</span>) <span class="cm-operator cm-variable-2">%&gt;%</span> &nbsp;<span class="cm-variable">print</span>(<span class="cm-variable">n</span><span class="cm-operator">=</span><span class="cm-number">30</span>) </span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># Ou ainda</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">alunos</span> <span class="cm-operator cm-variable-2">%&gt;%</span> <span class="cm-variable">left_join</span>(<span class="cm-variable">notas</span>) <span class="cm-operator cm-variable-2">%&gt;%</span> &nbsp;<span class="cm-variable">head</span>(<span class="cm-variable">n</span><span class="cm-operator">=</span><span class="cm-number">30</span>) </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 69px;"></div><div class="CodeMirror-gutters" style="display: none; height: 69px;"></div></div></div></pre><p> mas se quisermos altera o comportamento <em>default</em> podemos alterando as opções dizer que queremos 40 linhas de agora em diante. </p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">options</span>(<span class="cm-variable">dplyr.print_max</span> <span class="cm-operator">=</span> <span class="cm-number">40</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><p>usando os comandos podemos unir mais de um <em>data.frame</em> , nesse caso é importante passar o <em>by</em> para a união da terceira tabela.</p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">alunos</span> <span class="cm-operator cm-variable-2">%&gt;%</span> <span class="cm-variable">left_join</span>(<span class="cm-variable">notas</span>) <span class="cm-operator cm-variable-2">%&gt;%</span> <span class="cm-variable">left_join</span>(<span class="cm-variable">disciplinas</span>,<span class="cm-variable">by</span><span class="cm-operator">=</span><span class="cm-string">'CODIS'</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><p>suponha que você deseja saber quais alunos não tem nota </p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">alunos</span> <span class="cm-operator cm-variable-2">%&gt;%</span> <span class="cm-variable">anti_join</span>(<span class="cm-variable">notas</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><p>&nbsp;</p><p>vamos fazer um relatório unindo as 3 tabelas e selecionando as variáveis MAT,NOME,DISCIPLINA e NOTA e ordenando o resultado por NOME.</p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">notas</span> <span class="cm-operator cm-variable-2">%&gt;%</span> </span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">left_join</span>(<span class="cm-variable">disciplinas</span>) &nbsp;<span class="cm-operator cm-variable-2">%&gt;%</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">left_join</span>(<span class="cm-variable">alunos</span>) <span class="cm-operator cm-variable-2">%&gt;%</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">select</span>(<span class="cm-variable">MAT</span>,<span class="cm-variable">NOME</span>,<span class="cm-variable">DISCIPLINA</span>,<span class="cm-variable">NOTA</span>) <span class="cm-operator cm-variable-2">%&gt;%</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">arrange</span>(<span class="cm-variable">NOME</span>) </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 115px;"></div><div class="CodeMirror-gutters" style="display: none; height: 115px;"></div></div></div></pre><p>&nbsp;</p><p>Liste os alunos e suas notas para a disciplina Curso Básico de R.</p><p>&nbsp;</p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">notas</span> <span class="cm-operator cm-variable-2">%&gt;%</span> </span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">left_join</span>(<span class="cm-variable">disciplinas</span>) &nbsp;<span class="cm-operator cm-variable-2">%&gt;%</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">left_join</span>(<span class="cm-variable">alunos</span>) <span class="cm-operator cm-variable-2">%&gt;%</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">filter</span>(<span class="cm-variable">CODIS</span> <span class="cm-operator">==</span> &nbsp;<span class="cm-string">"ENSP.82.121.2"</span>) <span class="cm-operator cm-variable-2">%&gt;%</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">select</span>(<span class="cm-variable">MAT</span>,<span class="cm-variable">NOME</span>,<span class="cm-variable">NOTA</span>) <span class="cm-operator cm-variable-2">%&gt;%</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">arrange</span>(<span class="cm-variable">NOME</span>) </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 138px;"></div><div class="CodeMirror-gutters" style="display: none; height: 138px;"></div></div></div></pre><p>&nbsp;</p><p>caso os dois índices tem nomes diferentes nas tabelas o parâmetro <em>by</em> deve ser usado da seguinte forma:</p><p>&nbsp;</p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">X</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">data_frame</span>(<span class="cm-variable">ID</span> <span class="cm-operator">=</span> <span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">4</span>, <span class="cm-variable">y</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-number">1L</span>, <span class="cm-number">1L</span>,<span class="cm-number">2L</span>,<span class="cm-number">2L</span>))</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Y</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">data_frame</span>(<span class="cm-variable">COD</span><span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-number">3</span>,<span class="cm-number">2</span>,<span class="cm-number">1</span>,<span class="cm-number">4</span>), <span class="cm-variable">z</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-number">1</span>, <span class="cm-number">3</span>,<span class="cm-number">0</span>,<span class="cm-number">2</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">X</span> <span class="cm-operator cm-variable-2">%&gt;%</span> <span class="cm-variable">left_join</span>(<span class="cm-variable">Y</span>,<span class="cm-variable">by</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-string">"ID"</span> <span class="cm-operator">=</span> <span class="cm-string">"COD"</span>))</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 69px;"></div><div class="CodeMirror-gutters" style="display: none; height: 69px;"></div></div></div></pre><p>&nbsp;</p><p>Exercício:</p><ul><li><p>quais o nome e código das disciplinas  que não possuem alunos matriculados</p></li><li><p>liste as disciplinas e  alunos que não tiraram  conceito abaixo de <strong>B</strong> </p></li><li><p>O arquivo a seguir <a href='http://gitlab.procc.fiocruz.br/oswaldo/DS_2017/raw/master/exemplos/dorj.db3'>dorj.db3</a>  está no formato sqlite. você deve baixar abrir no <strong>R</strong> importar as tabelas dorj2004 e CADMUN e em seguida: </p><ul><li>unir as duas tabelas usando CODMUNRES do dorj2004 e muncoddv , ambos com 7 dígitos. </li><li>houve algum município do estado do RJ sem óbito? </li><li>algum código não encontrou correspondência na tabela CADMUN</li></ul></li></ul><ul><li></li></ul><h5><a name='header-n438' class='md-header-anchor '></a>2.5.7 Sumarizar</h5><p>A função <strong>summarise()</strong>  cria nova variável contendo uma estatística sumaria para uma determinada coluna em um <em>data.frame</em> , por exemplo vamos olhar novamente o dado <em>msleep</em> e aplicar uma função <strong>mean()</strong></p><p>&nbsp;</p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">msleep</span> <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">summarise</span>(<span class="cm-variable">sono_medio</span><span class="cm-operator">=</span><span class="cm-variable">mean</span>(<span class="cm-variable">sleep_total</span>))</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><p>Podemos criar mais variaveis a partir da mesma coluna </p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">msleep</span> <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">summarise</span>(<span class="cm-variable">sono_medio</span><span class="cm-operator">=</span><span class="cm-variable">mean</span>(<span class="cm-variable">sleep_total</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">sono_minimo</span><span class="cm-operator">=</span><span class="cm-variable">min</span>(<span class="cm-variable">sleep_total</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">sono_maximo</span><span class="cm-operator">=</span><span class="cm-variable">max</span>(<span class="cm-variable">sleep_total</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 115px;"></div><div class="CodeMirror-gutters" style="display: none; height: 115px;"></div></div></div></pre><p>ou ainda utilizando varias colunas.</p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="" contenteditable="false" cid="n445" mdtype="fences"> msleep %&gt;%
   summarise(sono_medio=mean(sleep_total),
   acordado_media=mean(awake))
</pre><p>uma variante dessa função permite que passemos uma lista de variáveis e uma lista de funções a serem aplicadas a todas.</p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">msleep</span> &nbsp;<span class="cm-operator cm-variable-2">%&gt;%</span> </span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">summarise_at</span>( <span class="cm-variable">vars</span>(<span class="cm-variable">sleep_total</span>, <span class="cm-variable">awake</span>), <span class="cm-variable">funs</span>( <span class="cm-variable">mean</span>, <span class="cm-variable">median</span>,<span class="cm-variable">sd</span>))</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><p>&nbsp;</p><p>a função <strong>summarise()</strong>  atinge seu potencial máximo quando usada em conjunto com comandos de agrupamento como veremos a seguir.</p><p>&nbsp;</p><h5><a name='header-n451' class='md-header-anchor '></a>2.5.8 Agrupar</h5><p>&nbsp;</p><p>a função <strong>group_by()</strong>  é uma função muito importante que nos permite criar grupos dentro do dado usada em conjunto com funções como <strong>mutate()</strong> , <strong>summarise()</strong> , permite a criação de novas tabelas obtidas da agregação de dados . </p><p>No exemplo abaixo vamos usar o exemplo anterior e criar novas variáveis sumarizadas pela <em>ordem</em> do animal e criar indicadores.</p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">msleep</span> <span class="cm-operator cm-variable-2">%&gt;%</span> </span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">group_by</span>(<span class="cm-variable">order</span>) <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">summarise</span>(<span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-variable">sono_medio</span><span class="cm-operator">=</span><span class="cm-variable">mean</span>(<span class="cm-variable">sleep_total</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">sono_minimo</span><span class="cm-operator">=</span><span class="cm-variable">min</span>(<span class="cm-variable">sleep_total</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">sono_maximo</span><span class="cm-operator">=</span><span class="cm-variable">max</span>(<span class="cm-variable">sleep_total</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-variable">total_especies</span><span class="cm-operator">=</span><span class="cm-variable">n</span>())</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 138px;"></div><div class="CodeMirror-gutters" style="display: none; height: 138px;"></div></div></div></pre><p>&nbsp;</p><p>como pode-se ver a ordem <em>Chiroptera</em> e a que tem o maior sono médio.  Note que a função <strong>n()</strong> conta o numero de ocorrências dentro de cada grupo. </p><p>&nbsp;</p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">msleep</span> <span class="cm-operator cm-variable-2">%&gt;%</span> </span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">count</span>(<span class="cm-variable">order</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><p>&nbsp;</p><p>caso queria criar uma indicador e depois saber a media dela o indicado é usar criar primeiro o indicador com <strong>mutate()</strong> e depois fazer o <strong>summarise()</strong> dele como no exemplo abaixo.</p><p>&nbsp;</p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">msleep</span> <span class="cm-operator cm-variable-2">%&gt;%</span> </span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">mutate</span> (<span class="cm-variable">rem_pct</span> <span class="cm-operator">=</span> (<span class="cm-variable">sleep_rem</span> <span class="cm-operator">/</span> <span class="cm-variable">sleep_total</span>)<span class="cm-operator">*</span><span class="cm-number">100</span>) <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">group_by</span>(<span class="cm-variable">order</span>) <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">summarise</span>( <span class="cm-variable">sono_medio</span><span class="cm-operator">=</span><span class="cm-variable">mean</span>(<span class="cm-variable">sleep_total</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">sono_minimo</span><span class="cm-operator">=</span><span class="cm-variable">min</span>(<span class="cm-variable">sleep_total</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">sono_maximo</span><span class="cm-operator">=</span><span class="cm-variable">max</span>(<span class="cm-variable">sleep_total</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">rem_media</span><span class="cm-operator">=</span><span class="cm-variable">mean</span>(<span class="cm-variable">rem_pct</span>,<span class="cm-variable">na.rm</span> <span class="cm-operator">=</span> <span class="cm-variable">TRUE</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">total_especies</span><span class="cm-operator">=</span><span class="cm-variable">n</span>())</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 207px;"></div><div class="CodeMirror-gutters" style="display: none; height: 207px;"></div></div></div></pre><p>&nbsp;</p><p>Usando o exemplo abaixo, crie um dado agrupado com a media de quilometragem por litro (kpl) , peso médio, máximo e mínimo de acordo com o numero de cilindros (cyl)</p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">carro</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">mtcars</span> <span class="cm-operator cm-variable-2">%&gt;%</span> <span class="cm-variable">as_tibble</span>() <span class="cm-operator cm-variable-2">%&gt;%</span> </span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">mutate</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  <span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">kpl</span> <span class="cm-arg-is">=</span> (<span class="cm-variable">mpg</span> <span class="cm-operator">/</span><span class="cm-number">3.78541</span>) <span class="cm-operator">*</span><span class="cm-number">1.6</span> ,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">disp</span> <span class="cm-arg-is">=</span> <span class="cm-variable">disp</span> <span class="cm-operator">*</span> <span class="cm-number">0.0163871</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-tab" role="presentation" cm-text="	">    </span> &nbsp; &nbsp;<span class="cm-variable">peso</span> <span class="cm-arg-is">=</span> (<span class="cm-variable">wt</span> <span class="cm-operator">*</span> <span class="cm-number">0.45352</span>)<span class="cm-operator">*</span><span class="cm-number">1000</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-tab" role="presentation" cm-text="	">    </span> &nbsp; &nbsp;<span class="cm-variable">mpg</span><span class="cm-arg-is">=</span><span class="cm-atom">NULL</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-tab" role="presentation" cm-text="	">    </span> &nbsp; &nbsp;<span class="cm-variable">wt</span> <span class="cm-arg-is">=</span><span class="cm-atom">NULL</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-tab" role="presentation" cm-text="	">    </span> &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 207px;"></div><div class="CodeMirror-gutters" style="display: none; height: 207px;"></div></div></div></pre><p>&nbsp;</p><h5><a name='header-n468' class='md-header-anchor '></a>2.5.9 União , Interseção  e demais funções uteis </h5><p>&nbsp;</p><p>A função <strong>union()</strong> como o nome sugere permite unir tabelas com a <strong>mesma</strong> estrutura, funciona com <strong>rbind()</strong>  do modulo básico sendo que permite unir duas ou mais tabelas.</p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">setosa</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">iris</span>[<span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">50</span>,]</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">virginica</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">iris</span>[<span class="cm-number">101</span><span class="cm-operator">:</span><span class="cm-number">150</span>,]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">union</span>(<span class="cm-variable">setora</span>,<span class="cm-variable">virginica</span>) &nbsp;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 69px;"></div><div class="CodeMirror-gutters" style="display: none; height: 69px;"></div></div></div></pre><p>a variante dessa função de nome <strong>union_all()</strong> permite unir tabelas de estruturas diferentes , sendo que as colunas que não correspondem serão preenchidas com <strong>NA</strong> </p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">X</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">data_frame</span>(<span class="cm-variable">ID</span> <span class="cm-operator">=</span> <span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">4</span>, <span class="cm-variable">y</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-number">1L</span>, <span class="cm-number">1L</span>,<span class="cm-number">2L</span>,<span class="cm-number">2L</span>),<span class="cm-variable">z</span><span class="cm-operator">=</span><span class="cm-variable">c</span>(<span class="cm-number">1</span>,<span class="cm-number">4</span>,<span class="cm-number">7</span>,<span class="cm-number">2</span>))</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Y</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">data_frame</span>(<span class="cm-variable">COD</span><span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-number">3</span>,<span class="cm-number">2</span>,<span class="cm-number">1</span>,<span class="cm-number">4</span>), <span class="cm-variable">z</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-number">1</span>, <span class="cm-number">3</span>,<span class="cm-number">0</span>,<span class="cm-number">2</span>),<span class="cm-variable">z</span><span class="cm-operator">=</span><span class="cm-variable">c</span>(<span class="cm-number">8</span>,<span class="cm-number">4</span>,<span class="cm-number">2</span>,<span class="cm-number">1</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">union_all</span>(<span class="cm-variable">X</span>,<span class="cm-variable">Y</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 69px;"></div><div class="CodeMirror-gutters" style="display: none; height: 69px;"></div></div></div></pre><p>a função <strong>intersect()</strong> mostra as linhas em comum entre duas tabelas, ao passo que a função <strong>setdiff()</strong> faz exatamente o oposto retornando as linhas diferentes </p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mtcars</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">modelo</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">rownames</span>(<span class="cm-variable">mtcars</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">A</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">mtcars</span>[<span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">20</span>,]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">B</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">mtcars</span>[<span class="cm-number">10</span><span class="cm-operator">:</span><span class="cm-number">30</span>,]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">intersect</span>(<span class="cm-variable">A</span>,<span class="cm-variable">B</span>) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">setdiff</span>(<span class="cm-variable">A</span>,<span class="cm-variable">B</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 115px;"></div><div class="CodeMirror-gutters" style="display: none; height: 115px;"></div></div></div></pre><p>&nbsp;</p><p>existem ainda outras funções bastante uteis no pacote <strong>dplyr</strong> entre elas destacamos  <strong>select_if()</strong> <strong>summarise_if()</strong>, <strong>mutate_if</strong> que podem selecionar a operação ou sumario somente se a variável for de um tipo </p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="" contenteditable="false" cid="n478" mdtype="fences">dados %&gt;% select_if( is.numeric) 

</pre><p>outras funções auxiliares , como por exemplo, <strong>sample_n()</strong> e <strong>sample_frac()</strong> que permitem selecionar uma amostra especificando o <em>n</em> ou a fração amostral.</p><p>As principais funções do <em>dplyr</em> foram vistas aqui, no entanto existem diversas outras que podem/devem ser exploradas.</p><h5><a name='header-n482' class='md-header-anchor '></a>2.5.10 Exercícios dplyr</h5><p>usando os dados  provenientes do sqlite <a href='http://gitlab.procc.fiocruz.br/oswaldo/DS_2017/raw/master/exemplos/dorj.db3'>dorj.db3</a> , com a tabela unida dorj2004 e CADMUN responda:</p><ul><li>qual o total de óbitos por mês no estado do Rio de Janeiro em 2004</li><li>compare o total de óbitos por mês na região metropolitana e no interior </li><li>crie um indicador com a razão metropolitana/interior </li><li>a proporção de óbitos por Influenza e pneumonia CID10 (J09-J18) é maior nos municípios com mais de 500 metros de altitude? </li></ul><p><a href='http://gitlab.procc.fiocruz.br/oswaldo/DS_2017/raw/master/limpando/exercicio_2.5.10.r'>Resposta do Exercício</a> </p><p>&nbsp;</p><h4><a name='header-n495' class='md-header-anchor '></a>2.6 Trabalhando com Strings -  pacote stringr</h4><p>o pacote stringr possui diversas funções que permitem a manipulação de string de uma forma diferente do <strong>R</strong> base.  Vamos percorer aqui algumas dentre as mais utulizadas. </p><p>Essas funções podem ser divididas em  grupos:</p><h5><a name='header-n498' class='md-header-anchor '></a>2.6.1 detecção de padrões</h5><p>Diversas funções estão disponíveis para detectar padrões, vamos criar um vetor e exemplificar algumas destas funções</p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-variable">frutas</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">c</span>(<span class="cm-string">"banana"</span>,<span class="cm-string">"maça"</span>,<span class="cm-string">"uva"</span>,<span class="cm-string">"morango"</span>,<span class="cm-string">"tangerina"</span>,<span class="cm-string">"abacaxi"</span>,<span class="cm-string">"laranja"</span>, <span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"fruta do conde"</span>, <span class="cm-string">"melancia"</span>, <span class="cm-string">"abacate"</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><p>&nbsp;</p><p>a função <strong>str_detect</strong>  retorna se cada um dos elementos do vetor possui o padrão (que pode ser uma regular expression). No exemplo abaixo quais as frutas possuem as vogais &quot;o&quot; ou &quot;u&quot; </p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">str_detect</span>(<span class="cm-variable">frutas</span>, <span class="cm-string">"[ou]"</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><p>já a função <strong>str_which</strong> retorna qual a posição das strings  que possuem o padrão</p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="" contenteditable="false" cid="n505" mdtype="fences">str_which(frutas,"o")
</pre><p>se quisermos saber quantas vogais tem em cada elemento podemos usar a função <strong>str_count</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="" contenteditable="false" cid="n507" mdtype="fences">str_count(frutas, "[aeiou]")
</pre><p>mas se quisermos saber a posição da primeira ocorrência usamos <strong>str_locate</strong>  </p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="" contenteditable="false" cid="n509" mdtype="fences">str_locate(frutas,'a')
</pre><p>e se quiseremso saber a posição de todas as ocorrências usamos <strong>str_locate_all</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="" contenteditable="false" cid="n511" mdtype="fences">str_locate_all(frutas,'a')
</pre><p>&nbsp;</p><h5><a name='header-n513' class='md-header-anchor '></a>2.6.2  Fazendo subsets das strings (substrings)</h5><p>a função basica para a criação de subtrings é a <strong>str_sub</strong>.  O exemplo seguinte retorna os 3 primeiros caracteres de cada string</p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">str_sub</span>(<span class="cm-variable">frutas</span>,<span class="cm-number">1</span>,<span class="cm-number">3</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><p>&nbsp;</p><p>o comando a seguir retorna os nomes que possuem o padrão &#39;na&#39; em seu conteúdo.</p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">str_subset</span>(<span class="cm-variable">frutas</span>, <span class="cm-string">'an'</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><p>&nbsp;</p><h5><a name='header-n520' class='md-header-anchor '></a>2.6.3 verifica e altera o tamanho e realiza remoção de brancos</h5><p>&nbsp;</p><p>A funçao <strong>str_lenght</strong> retorno o numero de caracteres em cada string do vetor (e não o numero de elementos do vetor) </p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">str_length</span>(<span class="cm-variable">frutas</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><p>Abaixo temos um exemplo onde são incluídos caracteres (por default em branco), e tamanho da saída fica constante , no caso abaixo em 14 caracteres e preenchendo com espaços em branco a esquerda.</p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">str_pad</span>(<span class="cm-variable">frutas</span>,<span class="cm-number">14</span>,<span class="cm-string">"left"</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><p>Aqui temos as strings resultantes com tamanho de 16 caracteres, sendo preenchida em ambos os lados por &#39;-&#39;</p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">str_pad</span>(<span class="cm-variable">frutas</span>,<span class="cm-number">16</span>,<span class="cm-string">"both"</span>, <span class="cm-string">'-'</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><p>&nbsp;</p><p>a remoção dos espaços em branco a esquerda e direita pode se feita com a função <strong>str_trim</strong></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">exemplo</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">c</span>( <span class="cm-string">"</span> &nbsp; &nbsp;<span class="cm-string">espaço a esquerda"</span>, &nbsp;<span class="cm-string">"espaço a direita &nbsp;  "</span>, <span class="cm-string">"</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-string">espaço em ambos os lados &nbsp; &nbsp; &nbsp;  "</span>, <span class="cm-string">"sem espaço"</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">str_trim</span>(<span class="cm-variable">exemplo</span>,<span class="cm-string">"both"</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 69px;"></div><div class="CodeMirror-gutters" style="display: none; height: 69px;"></div></div></div></pre><p>&nbsp;</p><h5><a name='header-n532' class='md-header-anchor '></a>2.6.4 alterando stings </h5><p>as funçoes <strong>str_to_lower</strong> , <strong>str_to_upper</strong> e  <strong>str_to_title</strong> , transformam as string, em minusculas , maiúsculas e capitalizadas respectivamente. por exemplo.</p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">str_to_title</span>(<span class="cm-variable">frutas</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><p>Repare o que aconteceu com a &quot;fruta do conde&quot;</p><p>&nbsp;</p><p>a funções <strong>str_replace</strong> e <strong>str_replace_all</strong> permite que um padrão possa ser substituído. fique atento que a primeira função somente altera a primeira ocorrência do padrão.</p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">str_replace</span>(<span class="cm-variable">frutas</span>, <span class="cm-string">"[a]"</span>, <span class="cm-string">"?"</span>) <span class="cm-comment"># altera a primeira ocorrência da letra 'a'</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><p>&nbsp;</p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">str_replace_all</span>(<span class="cm-variable">frutas</span>, <span class="cm-string">"[a]"</span>, <span class="cm-string">"?"</span>) <span class="cm-comment"># altera todas as  ocorrências da letra 'a'</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><p>&nbsp;</p><p>&nbsp;</p><h5><a name='header-n543' class='md-header-anchor '></a>2.5.6 juntando, partindo e ordenando </h5><p>a função de concatenação <strong>str_c</strong> possui diversos usos, veja abaixo algumas variações de seu uso.</p><p>&nbsp;</p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">str_c</span>(<span class="cm-string">"Janeiro"</span>,<span class="cm-string">"Fevereiro"</span>,<span class="cm-string">"Março"</span>,<span class="cm-string">"Abril"</span>,<span class="cm-string">"Maio"</span>,<span class="cm-string">"Junho"</span> ) </span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">str_c</span>(<span class="cm-string">"Janeiro"</span>,<span class="cm-string">"Fevereiro"</span>,<span class="cm-string">"Março"</span>,<span class="cm-string">"Abril"</span>,<span class="cm-string">"Maio"</span>,<span class="cm-string">"Junho"</span> ,<span class="cm-variable">sep</span><span class="cm-operator">=</span> <span class="cm-string">','</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">str_c</span>(<span class="cm-string">"Fruta: "</span>, <span class="cm-variable">frutas</span>) <span class="cm-comment"># </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">str_c</span>(<span class="cm-variable">frutas</span>,<span class="cm-variable">collapse</span> <span class="cm-operator">=</span> <span class="cm-string">", "</span>) <span class="cm-comment"># usando collapse resulta em 1 única string</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">str_c</span>(<span class="cm-variable">letters</span>[<span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">10</span>],<span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">10</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 207px;"></div><div class="CodeMirror-gutters" style="display: none; height: 207px;"></div></div></div></pre><p>&nbsp;</p><p>para adicionarmos elementos continuamos a usar a função <strong>c</strong> de concatenação do <strong>R</strong> , abaixo estamos adicionando 3 novas frutas as demais já existentes. </p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">frutas</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">c</span>(<span class="cm-variable">frutas</span>, <span class="cm-string">'limão galego'</span>,<span class="cm-string">'mamão Papaia'</span>, <span class="cm-string">"manga rosa"</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><p>&nbsp;</p><p>para ordenar temos as funções <strong>str_sort</strong> e <strong>str_order</strong> , a primeira ordena o vetor por ordem alfabética e a segunda retorna a posição (posto) de cada elemento do vetor. </p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">frutas</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">str_sort</span>(<span class="cm-variable">frutas</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">frutas</span> <span class="cm-comment"># exibe o vetor ordenado</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><p>&nbsp;</p><p>temos a a função <strong>str_split</strong> e suas similares <strong>str_split_fixed</strong> que partem a string em um determinado delimitador ou padrão. essa função é ,muito útil em diversos cenários. </p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">str_split</span>(<span class="cm-variable">frutas</span>,<span class="cm-string">'</span> <span class="cm-string">'</span>) &nbsp;<span class="cm-comment">#quebrando por espaço</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><p>a função <strong>str_dup</strong> que duplica o padrão </p><p>&nbsp;</p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">str_dup</span>(<span class="cm-variable">frutas</span>, <span class="cm-number">2</span>) <span class="cm-comment"># duplica</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">str_dup</span>(<span class="cm-variable">frutas</span>, <span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">3</span>) <span class="cm-comment">#replica o padrão</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><p>&nbsp;</p><p>e por fim a função <strong>str_glue</strong>  que permite misturar textos é variáveis </p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># permite que você use argumentos como variaveis!</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">str_glue</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">"Eu me chamo  {nome}, "</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">"e ano que vem vou fazer {idade + 1} anos."</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">nome</span> <span class="cm-arg-is">=</span> <span class="cm-string">"João da Silva"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">idade</span> <span class="cm-arg-is">=</span> <span class="cm-number">40</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 184px;"></div><div class="CodeMirror-gutters" style="display: none; height: 184px;"></div></div></div></pre><p>&nbsp;</p><p>ou ainda que formate uma saida como por exemplo </p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mtcars</span> <span class="cm-operator cm-variable-2">%&gt;%</span> <span class="cm-variable">str_glue_data</span>(<span class="cm-string">"O carro {rownames(.)}  tem um motor de  {hp} cavalos."</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><p>&nbsp;</p><h4><a name='header-n566' class='md-header-anchor '></a>2.7 usando datas com o pacote lubridate</h4><p>&nbsp;</p></div>
</body>
</html>