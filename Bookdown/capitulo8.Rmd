
```{r,echo=FALSE,message=FALSE,warning=FALSE}
library(knitr)
library(pander)
# Set so that long lines in R will be wrapped:
opts_chunk$set(tidy.opts=list(width.cutoff=50),tidy=TRUE)

```

# Dados de Área I

## Introdução 

- Na análise de áreas o atributo estudado é em geral resultado de uma contagem ou uma medida de sı́nte.

- O objetivo não é a predição para pontos não mensurados, mas a detecção e explicação de padrões e tendências observados entre áreas.

- Área é definida por um polı́gono cuja forma pode ser complexa bem como as relações de vizinhança.

O modelo básico do banco de dados:

|    Local    | Casos | População | Médico p/ 1000 hab |
| :---------: | :---: | :-------: | :----------------: |
|   Rio Bom   |  41   |   3209    |        5,4         |
| Serra Verde |  320  |   16897   |        2,6         |
| Poço Fundo  |  67   |   2569    |        1,3         |

## Visualização: Mapa de Padrão


```{r, echo=FALSE, warning=FALSE, results='asis', message = FALSE, out.width = "100%", fig.align = "center"}

library(sf)  
library(tmap)

olinda <- st_read("shapes/olinda.shp")

tm_shape(olinda) +
  tm_polygons("POP",
    style = "quantile",
    palette = "BuPu") +
  tm_legend(legend.position = c("left", "bottom"))


```

## Análise exploratória

### Efeitos de primeira ordem:

     - Médias móveis espaciais

     - Kernel
     
### Efeitos de segunda ordem (dependência espacial):

    - Índice de Moran
    
    - Índice de Geary

     - Correlograma
     
## Medidas de proximidade em dados de área

- Quando trabalhamos com atributos variando continuamente na área de estudo (geoestatı́stica) é natural usar distância entre localizações como medida de proximidade espacial.

- Precisamos definir como medir proximidade espacial em dados de área.

- Poderı́amos calcular por exemplo a distância entre os centros ou centróides dos polı́gonos.

- De forma mais geral, utilizamos uma matriz $W$, onde cada elemento $w_{ij}$ representa medida de proximidade espacial entre as áreas $A_i$ e $A_j$.

- A escolha de $w_{ij}$ depende do tipo de dado, da região, dos mecanismos particulares da dependência espacial.

Possíveis critérios:

| Tipos | Matrizes                                                     |
| :---: | :----------------------------------------------------------- |
|   1   | $$w_{ij} = \begin{cases} 1  \ \ \text{centróide de } A_i \ \text{é o mais próximo de } A_j \\ 0 \ \ \text{caso contrário} \end{cases}$$ |
|   2   | $$w_{ij} = \begin{cases} 1  \ \ \text{centróide de } A_i \ \text{dentro de distância especificada de } A_j \\ 0 \ \ \text{caso contrário} \end{cases}$$ |
|   3   | $$w_{ij} = \begin{cases} 1  \ \ A_i \ \text{tem fronteira comum com } A_j \\ 0 \ \ \text{caso contrário} \end{cases}$$ |
|   4   | $$w_{ij} = \dfrac{I_{ij}}{I_i} \ \text{sendo} \ I_{ij} \ \text{o comprimento da fronteira comum entre } A_i \ \text{e} \ A_j. I_{i} \ \text{é o perímetro de } \ A_i.$$ |